<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¹Ø¯Ø§Ø¯ Pipeline Ø´Ø§Ù…Ù„ Ù„Ù€ FLARE</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); min-height: 100vh; padding: 20px; line-height: 1.8; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); margin-bottom: 30px; text-align: center; }
        .card { background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); }
        .card h2 { color: #2c3e50; font-size: 1.8em; margin-bottom: 20px; border-bottom: 3px solid #ff6b6b; padding-bottom: 10px; }
        .pipeline-box { background: linear-gradient(120deg, #ff6b6b 0%, #ee5a24 100%); padding: 20px; border-radius: 15px; margin: 20px 0; color: white; }
        .setup-box { background: linear-gradient(120deg, #fd79a8 0%, #fdcb6e 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .optimization-box { background: linear-gradient(120deg, #74b9ff 0%, #0984e3 100%); padding: 20px; border-radius: 15px; margin: 20px 0; color: white; }
        .monitoring-box { background: linear-gradient(120deg, #00b894 0%, #00cec9 100%); padding: 20px; border-radius: 15px; margin: 20px 0; color: white; }
        .best-practices-box { background: linear-gradient(120deg, #6c5ce7 0%, #a29bfe 100%); padding: 20px; border-radius: 15px; margin: 20px 0; color: white; }
        .footer { background: rgba(44, 62, 80, 0.9); color: white; text-align: center; padding: 20px; border-radius: 15px; }
        .code-block { background: rgba(0, 0, 0, 0.8); color: #fff; padding: 15px; border-radius: 10px; font-family: 'Courier New', monospace; margin: 10px 0; overflow-x: auto; }
        .step-item { background: rgba(255, 255, 255, 0.2); padding: 15px; margin: 10px 0; border-radius: 10px; border-right: 4px solid #fff; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Pipeline Ø´Ø§Ù…Ù„ Ù„Ù€ FLARE</h1>
            <p>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø¹Ø§Ø´Ø±: Ø¨Ù†Ø§Ø¡ Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ ÙˆÙ…ØªÙ‚Ø¯Ù…</p>
        </div>

        <div class="card">
            <h2>ğŸš€ Ø¨Ù†Ø§Ø¡ Pipeline Ù…ØªÙƒØ§Ù…Ù„</h2>
            <div class="pipeline-box">
                <h3>ğŸ¯ Ù†Ø¸Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù„Ù‰ Pipeline:</h3>
                <p>Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù… FLARE ÙƒØ§Ù…Ù„ ÙŠØªØ·Ù„Ø¨ ØªÙ†Ø³ÙŠÙ‚ Ø¹Ø¯Ø© Ù…ÙƒÙˆÙ†Ø§Øª Ù„Ù„Ø¹Ù…Ù„ Ù…Ø¹Ø§Ù‹ Ø¨Ø³Ù„Ø§Ø³Ø©.</p>
                
                <div class="step-item">
                    <h4>1ï¸âƒ£ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h4>
                    <div class="code-block">
# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
pip install llama-index openai chromadb

# Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
from llama_index import (
    VectorStoreIndex,
    Document,
    ServiceContext,
    StorageContext
)
from llama_index.query_engine import FLAREInstructQueryEngine
from llama_index.llms import OpenAI
from llama_index.embeddings import OpenAIEmbedding
from llama_index.vector_stores import ChromaVectorStore
from llama_index.storage.docstore import SimpleDocumentStore
from llama_index.storage.index_store import SimpleIndexStore
import chromadb
import os
                    </div>
                </div>
                
                <div class="step-item">
                    <h4>2ï¸âƒ£ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h4>
                    <div class="code-block">
# Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
os.environ["OPENAI_API_KEY"] = "your-api-key-here"

# ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
def prepare_documents():
    documents = []
    
    # Ù…Ø«Ø§Ù„: Ù‚Ø±Ø§Ø¡Ø© Ù…Ù„ÙØ§Øª Ù…Ù† Ù…Ø¬Ù„Ø¯
    import glob
    for file_path in glob.glob("data/*.txt"):
        with open(file_path, 'r', encoding='utf-8') as f:
            content = f.read()
            documents.append(Document(
                text=content,
                metadata={
                    "source": file_path,
                    "type": "text"
                }
            ))
    
    return documents

documents = prepare_documents()
                    </div>
                </div>
                
                <div class="step-item">
                    <h4>3ï¸âƒ£ Ø¥Ø¹Ø¯Ø§Ø¯ Vector Store</h4>
                    <div class="code-block">
# Ø¥Ø¹Ø¯Ø§Ø¯ ChromaDB
chroma_client = chromadb.PersistentClient(path="./chroma_db")
chroma_collection = chroma_client.get_or_create_collection("flare_collection")
vector_store = ChromaVectorStore(chroma_collection=chroma_collection)

# Ø¥Ø¹Ø¯Ø§Ø¯ Storage Context
storage_context = StorageContext.from_defaults(
    vector_store=vector_store,
    docstore=SimpleDocumentStore(),
    index_store=SimpleIndexStore()
)
                    </div>
                </div>
                
                <div class="step-item">
                    <h4>4ï¸âƒ£ ØªÙƒÙˆÙŠÙ† Service Context</h4>
                    <div class="code-block">
# Ø¥Ø¹Ø¯Ø§Ø¯ LLM ÙˆEmbedding
llm = OpenAI(
    model="gpt-4",
    temperature=0.1,
    max_tokens=2048
)

embed_model = OpenAIEmbedding(
    model="text-embedding-ada-002"
)

# Ø¥Ø¹Ø¯Ø§Ø¯ Service Context
service_context = ServiceContext.from_defaults(
    llm=llm,
    embed_model=embed_model,
    chunk_size=512,
    chunk_overlap=50,
    system_prompt="Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙŠÙ‚Ø¯Ù… Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…ÙØµÙ„Ø©."
)
                    </div>
                </div>
                
                <div class="step-item">
                    <h4>5ï¸âƒ£ Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙÙ‡Ø±Ø³ ÙˆØ¥Ø¹Ø¯Ø§Ø¯ FLARE</h4>
                    <div class="code-block">
# Ø¨Ù†Ø§Ø¡ VectorStoreIndex
index = VectorStoreIndex.from_documents(
    documents,
    storage_context=storage_context,
    service_context=service_context,
    show_progress=True
)

# Ø­ÙØ¸ Ø§Ù„ÙÙ‡Ø±Ø³ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ
index.storage_context.persist("./storage")

# Ø¥Ø¹Ø¯Ø§Ø¯ FLARE Query Engine
flare_query_engine = FLAREInstructQueryEngine(
    query_engine=index.as_query_engine(
        similarity_top_k=5,
        response_mode="compact"
    ),
    llm=llm,
    max_iterations=5,
    verbose=True
)
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆØªØ­Ø³ÙŠÙ†Ø§Øª</h2>
            <div class="setup-box">
                <h3>ğŸ”§ Ø¶Ø¨Ø· Ù…Ø¹Ø§Ù…Ù„Ø§Øª FLARE Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©:</h3>
                
                <h4>ğŸ“Š Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø«Ù‚Ø©:</h4>
                <div class="code-block">
# Ø¥Ø¹Ø¯Ø§Ø¯ FLARE Ù…Ø¹ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ø®ØµØµØ©
from llama_index.query_engine import FLAREInstructQueryEngine

flare_query_engine = FLAREInstructQueryEngine(
    query_engine=index.as_query_engine(
        similarity_top_k=3,
        response_mode="tree_summarize"
    ),
    llm=llm,
    max_iterations=7,
    # Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ØªØ­ÙƒÙ…
    num_lookahead_tokens=5,
    max_function_calls=10,
    verbose=True
)
                </div>
                
                <h4>ğŸ¯ Prompt Ù…Ø®ØµØµ Ù„Ù…Ø¬Ø§Ù„ Ù…Ø­Ø¯Ø¯:</h4>
                <div class="code-block">
# Ø¥Ø¹Ø¯Ø§Ø¯ prompt Ù…Ø®ØµØµ Ù„Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ø·Ø¨ÙŠ Ù…Ø«Ù„Ø§Ù‹
medical_prompt = """
Ø£Ù†Øª Ø·Ø¨ÙŠØ¨ Ø§Ø³ØªØ´Ø§Ø±ÙŠ Ù…ØªØ®ØµØµ. Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø·Ø¨ÙŠØ©:

1. Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Øª Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø·Ø¨ÙŠØ© Ù…Ø­Ø¯Ø«Ø© Ø£Ùˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ù… [SEARCH: Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¨Ø­Ø«]
2. Ø§Ø°ÙƒØ± Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
3. Ù†Ø¨Ù‡ Ø¹Ù„Ù‰ Ø¶Ø±ÙˆØ±Ø© Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ¨ Ù…Ø®ØªØµ
4. ÙƒÙ† Ø¯Ù‚ÙŠÙ‚Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©

Ù…Ø«Ø§Ù„:
Ø§Ù„Ø³Ø¤Ø§Ù„: Ù…Ø§ Ø£Ø¹Ø±Ø§Ø¶ Ù…Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±ÙŠØŸ
Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: Ø£Ø¹Ø±Ø§Ø¶ Ù…Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±ÙŠ ØªØ´Ù…Ù„ [SEARCH: Ø£Ø¹Ø±Ø§Ø¶ Ù…Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ«Ø©] Ø§Ù„Ø¹Ø·Ø´ Ø§Ù„Ù…ÙØ±Ø·...

Ø§Ø¨Ø¯Ø£ Ø¥Ø¬Ø§Ø¨ØªÙƒ:
"""

# ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„prompt Ø§Ù„Ù…Ø®ØµØµ
service_context_medical = ServiceContext.from_defaults(
    llm=llm,
    embed_model=embed_model,
    system_prompt=medical_prompt
)
                </div>
                
                <h3>ğŸ” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©:</h3>
                <div class="code-block">
# Ø¥Ø¹Ø¯Ø§Ø¯ retriever Ù…Ø®ØµØµ
from llama_index.retrievers import VectorIndexRetriever
from llama_index.query_engine import RetrieverQueryEngine
from llama_index.postprocessor import SimilarityPostprocessor

# Ø¥Ø¹Ø¯Ø§Ø¯ retriever Ù…Ø¹ ÙÙ„ØªØ±Ø©
retriever = VectorIndexRetriever(
    index=index,
    similarity_top_k=10
)

# Ø¥Ø¹Ø¯Ø§Ø¯ post-processor Ù„Ù„ÙÙ„ØªØ±Ø©
postprocessor = SimilarityPostprocessor(
    similarity_cutoff=0.7
)

# query engine Ù…Ø®ØµØµ
custom_query_engine = RetrieverQueryEngine(
    retriever=retriever,
    node_postprocessors=[postprocessor]
)

# FLARE Ù…Ø¹ query engine Ù…Ø®ØµØµ
advanced_flare = FLAREInstructQueryEngine(
    query_engine=custom_query_engine,
    llm=llm,
    max_iterations=5
)
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ¯ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡</h2>
            <div class="optimization-box">
                <h3>âš¡ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†:</h3>
                
                <div class="step-item">
                    <h4>ğŸ’¾ Caching ÙˆØ§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ©</h4>
                    <div class="code-block">
from llama_index.cache import SimpleCache

# Ø¥Ø¹Ø¯Ø§Ø¯ cache Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª
cache = SimpleCache()

# Ø¥Ø¹Ø¯Ø§Ø¯ service context Ù…Ø¹ cache
service_context_cached = ServiceContext.from_defaults(
    llm=llm,
    embed_model=embed_model,
    cache=cache
)
                    </div>
                </div>
                
                <div class="step-item">
                    <h4>ğŸ”„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø¬Ù…Ø¹Ø© (Batch Processing)</h4>
                    <div class="code-block">
# Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¹Ø¯Ø© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù…Ø¹Ø§Ù‹
def batch_query(queries, flare_engine):
    results = []
    for query in queries:
        print(f"Ù…Ø¹Ø§Ù„Ø¬Ø©: {query}")
        response = flare_engine.query(query)
        results.append({
            "query": query,
            "response": str(response),
            "metadata": response.metadata if hasattr(response, 'metadata') else {}
        })
    return results

# Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
test_queries = [
    "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ",
    "ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚ØŸ",
    "Ù…Ø§ Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ"
]

batch_results = batch_query(test_queries, flare_query_engine)
                    </div>
                </div>
                
                <div class="step-item">
                    <h4>ğŸ“Š Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h4>
                    <div class="code-block">
import time
from typing import Dict, Any

class FLAREMonitor:
    def __init__(self):
        self.stats = {
            "total_queries": 0,
            "total_searches": 0,
            "avg_response_time": 0,
            "error_count": 0
        }
    
    def query_with_monitoring(self, flare_engine, query: str) -> Dict[str, Any]:
        start_time = time.time()
        try:
            response = flare_engine.query(query)
            end_time = time.time()
            
            # ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            self.stats["total_queries"] += 1
            response_time = end_time - start_time
            self.stats["avg_response_time"] = (
                (self.stats["avg_response_time"] * (self.stats["total_queries"] - 1) + response_time) 
                / self.stats["total_queries"]
            )
            
            return {
                "response": str(response),
                "response_time": response_time,
                "success": True
            }
        except Exception as e:
            self.stats["error_count"] += 1
            return {
                "response": None,
                "error": str(e),
                "success": False
            }
    
    def get_stats(self):
        return self.stats

# Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨
monitor = FLAREMonitor()
result = monitor.query_with_monitoring(flare_query_engine, "Ù…Ø§ Ù‡Ùˆ FLAREØŸ")
print(monitor.get_stats())
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“Š Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…</h2>
            <div class="monitoring-box">
                <h3>ğŸ” Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø´Ø§Ù…Ù„:</h3>
                
                <div class="step-item">
                    <h4>ğŸ“ˆ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h4>
                    <div class="code-block">
import json
from datetime import datetime

class PerformanceTracker:
    def __init__(self, log_file="flare_performance.json"):
        self.log_file = log_file
        self.session_data = []
    
    def log_query(self, query, response, metadata):
        log_entry = {
            "timestamp": datetime.now().isoformat(),
            "query": query,
            "response_length": len(str(response)),
            "search_count": metadata.get("search_count", 0),
            "confidence_scores": metadata.get("confidence_scores", []),
            "response_time": metadata.get("response_time", 0)
        }
        self.session_data.append(log_entry)
        
        # Ø­ÙØ¸ ÙÙŠ Ù…Ù„Ù
        with open(self.log_file, 'a', encoding='utf-8') as f:
            f.write(json.dumps(log_entry, ensure_ascii=False) + "\n")
    
    def generate_report(self):
        if not self.session_data:
            return "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªÙ‚Ø±ÙŠØ±"
        
        total_queries = len(self.session_data)
        avg_response_time = sum(entry["response_time"] for entry in self.session_data) / total_queries
        avg_search_count = sum(entry["search_count"] for entry in self.session_data) / total_queries
        
        return f"""
ØªÙ‚Ø±ÙŠØ± Ø£Ø¯Ø§Ø¡ FLARE:
================
Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª: {total_queries}
Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: {avg_response_time:.2f} Ø«Ø§Ù†ÙŠØ©
Ù…ØªÙˆØ³Ø· Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø­Ø«Ø§Øª: {avg_search_count:.2f}
        """

tracker = PerformanceTracker()
                    </div>
                </div>
                
                <div class="step-item">
                    <h4>ğŸ¯ ØªÙ‚ÙŠÙŠÙ… Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</h4>
                    <div class="code-block">
def evaluate_response_quality(query, response, expected_keywords=None):
    """ØªÙ‚ÙŠÙŠÙ… Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ù…Ø­Ø¯Ø¯Ø©"""
    score = 0
    feedback = []
    
    # Ø·ÙˆÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
    response_text = str(response)
    if len(response_text) > 100:
        score += 20
        feedback.append("Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù…ÙØµÙ„Ø©")
    else:
        feedback.append("Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‚ØµÙŠØ±Ø©")
    
    # ÙˆØ¬ÙˆØ¯ ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ© Ù…Ø·Ù„ÙˆØ¨Ø©
    if expected_keywords:
        found_keywords = sum(1 for keyword in expected_keywords 
                           if keyword.lower() in response_text.lower())
        keyword_score = (found_keywords / len(expected_keywords)) * 30
        score += keyword_score
        feedback.append(f"ÙˆØ¬ÙˆØ¯ {found_keywords}/{len(expected_keywords)} ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ©")
    
    # ØªÙ…Ø§Ø³Ùƒ Ø§Ù„Ù†Øµ
    sentences = response_text.split('.')
    if len(sentences) > 2:
        score += 25
        feedback.append("Ø§Ù„Ù†Øµ Ù…ØªÙ…Ø§Ø³Ùƒ")
    
    # ÙˆØ¬ÙˆØ¯ Ù…ØµØ§Ø¯Ø± Ø£Ùˆ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø­Ø¯Ø¯Ø©
    if any(indicator in response_text.lower() 
           for indicator in ['ÙˆÙÙ‚Ø§Ù‹ Ù„Ù€', 'Ø¨Ø­Ø³Ø¨', 'ØªØ´ÙŠØ± Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª', 'Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª']):
        score += 25
        feedback.append("ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø±Ø§Ø¬Ø¹")
    
    return {
        "score": min(score, 100),
        "feedback": feedback
    }

# Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
evaluation = evaluate_response_quality(
    "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ",
    response,
    ["Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ", "ØªØ¹Ù„Ù… Ø¢Ù„ÙŠ", "Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª"]
)
print(evaluation)
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª</h2>
            <div class="best-practices-box">
                <h3>ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ù†Ø¬Ø§Ø­:</h3>
                
                <h4>ğŸ¯ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>
                <ul>
                    <li><strong>Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…ØµØ§Ø¯Ø±:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ù…ØµØ§Ø¯Ø± Ù…ÙˆØ«ÙˆÙ‚Ø© ÙˆÙ…Ø­Ø¯Ø«Ø©</li>
                    <li><strong>ØªÙ†ÙˆÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰:</strong> Ø§Ø´Ù…Ù„ Ø£Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„ÙØ© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</li>
                    <li><strong>ØªÙ†Ø¸ÙŠÙ… Ø§Ù„metadata:</strong> Ø£Ø¶Ù Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØµÙÙŠØ© Ù…ÙÙŠØ¯Ø©</li>
                    <li><strong>ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±ÙŠ:</strong> Ø­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ù…</li>
                </ul>
                
                <h4>âš™ï¸ Ø¶Ø¨Ø· Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª:</h4>
                <ul>
                    <li><strong>Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø«Ù… Ø­Ø³Ù†</li>
                    <li><strong>Ø§Ø®ØªØ¨Ø± ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹:</strong> ØºÙŠØ± Ù…Ø¹Ø§Ù…Ù„ ÙˆØ§Ø­Ø¯ ÙÙŠ Ø§Ù„Ù…Ø±Ø©</li>
                    <li><strong>Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø£Ø¯Ø§Ø¡:</strong> ØªØªØ¨Ø¹ ØªØ£Ø«ÙŠØ± ÙƒÙ„ ØªØºÙŠÙŠØ±</li>
                    <li><strong>ÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ø¯Ù‚Ø©:</strong> Ø§Ø®ØªØ± Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ùƒ</li>
                </ul>
                
                <h4>ğŸ“Š Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø©:</h4>
                <ul>
                    <li><strong>Ø³Ø¬Ù„ ÙƒÙ„ Ø´ÙŠØ¡:</strong> Ø§Ø­ØªÙØ¸ Ø¨Ø³Ø¬Ù„Ø§Øª Ù…ÙØµÙ„Ø©</li>
                    <li><strong>Ø­Ù„Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡:</strong> Ø§ÙÙ‡Ù… Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„ÙØ´Ù„</li>
                    <li><strong>Ù‚ÙŠØ³ Ø§Ù„Ø±Ø¶Ø§:</strong> Ø§Ø¬Ù…Ø¹ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</li>
                    <li><strong>Ø­Ø³Ù† Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±:</strong> Ø·ÙˆØ± Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„Ù…</li>
                </ul>
                
                <h4>ğŸ”§ Ø§Ù„ØµÙŠØ§Ù†Ø© ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±:</h4>
                <div class="code-block">
# Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¯ÙˆØ±ÙŠØ©
def backup_system():
    import shutil
    from datetime import datetime
    
    backup_dir = f"backup_{datetime.now().strftime('%Y%m%d_%H%M%S')}"
    shutil.copytree("./storage", f"./{backup_dir}/storage")
    shutil.copytree("./chroma_db", f"./{backup_dir}/chroma_db")
    print(f"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: {backup_dir}")

# ØªØ´ØºÙŠÙ„ backup Ø¯ÙˆØ±ÙŠ
import schedule
schedule.every().day.at("02:00").do(backup_system)
                </div>
                
                <h3>ğŸš€ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø¥Ù†ØªØ§Ø¬:</h3>
                <ul>
                    <li><strong>Ø£Ù…Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong> Ø§Ø­Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©</li>
                    <li><strong>Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹:</strong> ØµÙ…Ù… Ù„Ù„Ù†Ù…Ùˆ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ</li>
                    <li><strong>Ù…ÙˆØ«ÙˆÙ‚ÙŠØ© Ø¹Ø§Ù„ÙŠØ©:</strong> Ø§Ø¶Ù…Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø©</li>
                    <li><strong>ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù…ØªØ§Ø²Ø©:</strong> Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø³Ù‡Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</li>
                </ul>
            </div>
        </div>

        <div class="footer">
            <p>ğŸ—ï¸ Pipeline Ù…ØªÙƒØ§Ù…Ù„: Ù…Ù† Ø§Ù„ÙÙƒØ±Ø© Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø¥Ù†ØªØ§Ø¬ Ù‚ÙˆÙŠ!</p>
        </div>
    </div>
</body>
</html>