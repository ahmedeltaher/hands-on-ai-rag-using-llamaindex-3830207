<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metadata Extraction - Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø« Ø¹Ø´Ø±: Ø§Ø®ØªØ¨Ø§Ø± ÙˆÙ‚ÙŠØ§Ø³ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 2rem;
        }

        .card {
            background: white;
            margin: 1.5rem 0;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .card h2 {
            background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
            color: white;
            padding: 1.5rem;
            margin: 0;
            font-size: 1.8em;
            border-top: 5px solid #667eea;
        }

        .card-content {
            padding: 1.5rem;
        }

        .testing-framework {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin: 1.5rem 0;
            border: 2px solid #00b894;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 1.5rem 0;
        }

        .test-card {
            background: rgba(255, 255, 255, 0.8);
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid #74b9ff;
            transition: all 0.3s ease;
        }

        .test-card:hover {
            transform: translateY(-3px);
            border-color: #0984e3;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .test-header {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .metrics-dashboard {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin: 1.5rem 0;
            border: 2px solid #fd79a8;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.8);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #fab1a0;
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: scale(1.05);
            border-color: #e17055;
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #e17055;
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 1.1em;
            color: #2d3436;
            font-weight: 600;
        }

        .evaluation-methods {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin: 1.5rem 0;
            border: 2px solid #6c5ce7;
        }

        .method-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .method-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 1.5rem;
            border-radius: 10px;
            border: 2px solid #a29bfe;
            transition: transform 0.3s ease;
        }

        .method-item:hover {
            transform: translateY(-3px);
            border-color: #6c5ce7;
        }

        .method-icon {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5em;
            margin-bottom: 1rem;
        }

        .code-block {
            background: #2d3436;
            color: #00cec9;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            direction: ltr;
            text-align: left;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            overflow-x: auto;
            border: 2px solid #636e72;
        }

        .code-block pre {
            margin: 0;
            white-space: pre-wrap;
        }

        .results-analysis {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin: 1.5rem 0;
            border: 2px solid #e17055;
        }

        .analysis-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border: 2px solid #fab1a0;
        }

        .analysis-header {
            background: linear-gradient(135deg, #e17055 0%, #fab1a0 100%);
            color: white;
            padding: 0.8rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .highlight-box {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #00a085;
        }

        .warning-box {
            background: linear-gradient(135deg, #e17055 0%, #fab1a0 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #d63031;
        }

        .info-box {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #2d3436;
        }

        .technical-detail {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #d63031;
        }

        .comparison-table {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin: 1.5rem 0;
            border: 2px solid #e17055;
            overflow-x: auto;
        }

        .styled-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .styled-table thead {
            background: linear-gradient(135deg, #e17055 0%, #fab1a0 100%);
            color: white;
        }

        .styled-table th,
        .styled-table td {
            padding: 1rem;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }

        .styled-table tbody tr:hover {
            background-color: rgba(225, 112, 85, 0.1);
            transition: background-color 0.3s ease;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 1rem;
            }
            
            .test-grid,
            .metrics-grid,
            .method-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š Ø§Ø®ØªØ¨Ø§Ø± ÙˆÙ‚ÙŠØ§Ø³ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h1>
            <p>Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø« Ø¹Ø´Ø±: Ø·Ø±Ù‚ Ø´Ø§Ù…Ù„Ø© Ù„ØªÙ‚ÙŠÙŠÙ… Ø¬ÙˆØ¯Ø© ÙˆÙØ¹Ø§Ù„ÙŠØ© Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù€ Metadata</p>
        </div>

        <div class="content">
            <!-- Ø¥Ø·Ø§Ø± Ø§Ù„Ø¹Ù…Ù„ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
            <div class="card">
                <h2>ğŸ§ª Ø¥Ø·Ø§Ø± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
                <div class="card-content">
                    <p>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¯Ù‚ÙŠÙ‚ Ù‡Ùˆ Ù…ÙØªØ§Ø­ Ù†Ø¬Ø§Ø­ Ø£ÙŠ Ù†Ø¸Ø§Ù… metadata extraction! Ù‡Ù†Ø§ Ø¥Ø·Ø§Ø± Ø¹Ù…Ù„ Ø´Ø§Ù…Ù„ Ù„Ù‚ÙŠØ§Ø³ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø¨ÙƒÙ„ Ø¬ÙˆØ§Ù†Ø¨Ù‡:</p>

                    <div class="testing-framework">
                        <h4>ğŸ”¬ Ù…ÙƒÙˆÙ†Ø§Øª Ø¥Ø·Ø§Ø± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h4>
                        
                        <div class="test-grid">
                            <div class="test-card">
                                <div class="test-header">
                                    <h5>ğŸ“‹ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h5>
                                </div>
                                <div>
                                    <p>Ø¥Ù†Ø´Ø§Ø¡ dataset Ù…ØªÙ†ÙˆØ¹ ÙˆÙ…Ù…Ø«Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ:</p>
                                    <div class="code-block">
                                        <pre>
import pandas as pd
import random
from typing import List, Dict

class TestDatasetBuilder:
    def __init__(self):
        self.test_cases = []
        self.ground_truth = {}
    
    def add_test_case(self, text: str, expected_metadata: Dict):
        """Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©"""
        case_id = len(self.test_cases)
        self.test_cases.append({
            'id': case_id,
            'text': text,
            'domain': self.detect_domain(text),
            'length': len(text.split()),
            'complexity': self.assess_complexity(text)
        })
        self.ground_truth[case_id] = expected_metadata
    
    def detect_domain(self, text: str) -> str:
        """ØªØ­Ø¯ÙŠØ¯ Ù…Ø¬Ø§Ù„ Ø§Ù„Ù†Øµ"""
        medical_keywords = ['Ù…Ø±Ø¶', 'Ø¯ÙˆØ§Ø¡', 'Ø¹Ù„Ø§Ø¬', 'Ø·Ø¨ÙŠØ¨']
        legal_keywords = ['Ù‚Ø§Ù†ÙˆÙ†', 'Ù…Ø­ÙƒÙ…Ø©', 'Ø¹Ù‚Ø¯', 'Ø­Ù‚']
        tech_keywords = ['Ø¨Ø±Ù…Ø¬Ø©', 'Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ©', 'Ø¨ÙŠØ§Ù†Ø§Øª', 'Ø°ÙƒØ§Ø¡']
        
        if any(word in text for word in medical_keywords):
            return 'medical'
        elif any(word in text for word in legal_keywords):
            return 'legal'
        elif any(word in text for word in tech_keywords):
            return 'tech'
        return 'general'
    
    def assess_complexity(self, text: str) -> str:
        """ØªÙ‚ÙŠÙŠÙ… ØªØ¹Ù‚Ø¯ Ø§Ù„Ù†Øµ"""
        words = text.split()
        avg_word_length = sum(len(word) for word in words) / len(words)
        
        if avg_word_length > 7 and len(words) > 200:
            return 'high'
        elif avg_word_length > 5 and len(words) > 100:
            return 'medium'
        return 'low'
    
    def create_balanced_dataset(self, size_per_domain=50):
        """Ø¥Ù†Ø´Ø§Ø¡ dataset Ù…ØªÙˆØ§Ø²Ù†"""
        domains = ['medical', 'legal', 'tech', 'general']
        complexities = ['low', 'medium', 'high']
        
        for domain in domains:
            for complexity in complexities:
                for i in range(size_per_domain // 3):
                    # Ø¥Ù†Ø´Ø§Ø¡ Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ
                    text = self.generate_sample_text(domain, complexity)
                    expected = self.create_expected_metadata(text, domain)
                    self.add_test_case(text, expected)
    
    def get_dataset_stats(self):
        """Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª dataset"""
        df = pd.DataFrame(self.test_cases)
        return {
            'total_cases': len(self.test_cases),
            'domain_distribution': df['domain'].value_counts().to_dict(),
            'complexity_distribution': df['complexity'].value_counts().to_dict(),
            'avg_text_length': df['length'].mean()
        }
                                        </pre>
                                    </div>
                                </div>
                            </div>

                            <div class="test-card">
                                <div class="test-header">
                                    <h5>âš¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø¢Ù„ÙŠ</h5>
                                </div>
                                <div>
                                    <p>Ù†Ø¸Ø§Ù… Ø¢Ù„ÙŠ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙˆØ¬Ù…Ø¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</p>
                                    <div class="code-block">
                                        <pre>
import time
import json
from datetime import datetime

class AutomatedTester:
    def __init__(self, extractor, test_dataset):
        self.extractor = extractor
        self.test_dataset = test_dataset
        self.results = {}
        self.performance_metrics = {}
    
    def run_full_test_suite(self):
        """ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª"""
        print("ğŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©...")
        
        start_time = time.time()
        total_cases = len(self.test_dataset.test_cases)
        
        for i, test_case in enumerate(self.test_dataset.test_cases):
            print(f"ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± {i+1}/{total_cases}: {test_case['domain']}")
            
            # ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬
            case_start = time.time()
            try:
                result = self.extractor.extract(test_case['text'])
                extraction_time = time.time() - case_start
                
                self.results[test_case['id']] = {
                    'success': True,
                    'result': result,
                    'extraction_time': extraction_time,
                    'timestamp': datetime.now().isoformat()
                }
                
            except Exception as e:
                self.results[test_case['id']] = {
                    'success': False,
                    'error': str(e),
                    'extraction_time': time.time() - case_start,
                    'timestamp': datetime.now().isoformat()
                }
        
        total_time = time.time() - start_time
        self.performance_metrics = {
            'total_time': total_time,
            'avg_time_per_case': total_time / total_cases,
            'success_rate': self.calculate_success_rate(),
            'total_cases': total_cases
        }
        
        print("âœ… Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª!")
        return self.results
    
    def calculate_success_rate(self):
        """Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­"""
        successful = sum(1 for r in self.results.values() if r['success'])
        return (successful / len(self.results)) * 100
    
    def save_results(self, filename):
        """Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙŠ Ù…Ù„Ù"""
        report = {
            'test_results': self.results,
            'performance_metrics': self.performance_metrics,
            'test_config': {
                'extractor_type': type(self.extractor).__name__,
                'test_date': datetime.now().isoformat()
            }
        }
        
        with open(filename, 'w', encoding='utf-8') as f:
            json.dump(report, f, ensure_ascii=False, indent=2)
                                        </pre>
                                    </div>
                                </div>
                            </div>

                            <div class="test-card">
                                <div class="test-header">
                                    <h5>ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h5>
                                </div>
                                <div>
                                    <p>ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¹ Ù…Ø¤Ø´Ø±Ø§Øª Ù…ÙØµÙ„Ø©:</p>
                                    <div class="code-block">
                                        <pre>
class ResultsAnalyzer:
    def __init__(self, results, ground_truth, test_cases):
        self.results = results
        self.ground_truth = ground_truth
        self.test_cases = test_cases
        self.metrics = {}
    
    def calculate_accuracy_metrics(self):
        """Ø­Ø³Ø§Ø¨ Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ø¯Ù‚Ø©"""
        summary_scores = []
        entity_scores = []
        question_scores = []
        
        for case_id, result in self.results.items():
            if not result['success']:
                continue
                
            expected = self.ground_truth[case_id]
            actual = result['result'].metadata
            
            # Ø¯Ù‚Ø© Ø§Ù„Ù…Ù„Ø®Øµ
            if 'section_summary' in actual and 'summary' in expected:
                summary_score = self.calculate_text_similarity(
                    actual['section_summary'], 
                    expected['summary']
                )
                summary_scores.append(summary_score)
            
            # Ø¯Ù‚Ø© Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª
            if 'entities' in actual and 'entities' in expected:
                entity_score = self.calculate_entity_overlap(
                    actual['entities'], 
                    expected['entities']
                )
                entity_scores.append(entity_score)
        
        self.metrics['summary_accuracy'] = np.mean(summary_scores) if summary_scores else 0
        self.metrics['entity_accuracy'] = np.mean(entity_scores) if entity_scores else 0
        
        return self.metrics
    
    def calculate_text_similarity(self, text1, text2):
        """Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ´Ø§Ø¨Ù‡ Ø¨ÙŠÙ† Ø§Ù„Ù†ØµÙˆØµ"""
        # Ø§Ø³ØªØ®Ø¯Ø§Ù… Jaccard similarity Ù„Ù„ÙƒÙ„Ù…Ø§Øª
        words1 = set(text1.lower().split())
        words2 = set(text2.lower().split())
        
        intersection = words1.intersection(words2)
        union = words1.union(words2)
        
        return len(intersection) / len(union) if union else 0
    
    def calculate_entity_overlap(self, entities1, entities2):
        """Ø­Ø³Ø§Ø¨ ØªØ¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª"""
        set1 = set(entities1) if isinstance(entities1, list) else set()
        set2 = set(entities2) if isinstance(entities2, list) else set()
        
        if not set1 and not set2:
            return 1.0  # ÙƒÙ„Ø§Ù‡Ù…Ø§ ÙØ§Ø±Øº = Ù…Ø·Ø§Ø¨Ù‚Ø© ØªØ§Ù…Ø©
        
        intersection = set1.intersection(set2)
        union = set1.union(set2)
        
        return len(intersection) / len(union) if union else 0
    
    def generate_performance_report(self):
        """Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø£Ø¯Ø§Ø¡ Ø´Ø§Ù…Ù„"""
        report = {
            'overall_metrics': self.metrics,
            'domain_performance': self.analyze_by_domain(),
            'complexity_performance': self.analyze_by_complexity(),
            'time_analysis': self.analyze_timing(),
            'failure_analysis': self.analyze_failures()
        }
        
        return report
                                        </pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ -->
            <div class="card">
                <h2>ğŸ“ˆ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
                <div class="card-content">
                    <div class="metrics-dashboard">
                        <h4>ğŸ¯ Ù„ÙˆØ­Ø© Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</h4>
                        
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-value">87%</div>
                                <div class="metric-label">Ø¯Ù‚Ø© Ø§Ù„Ù…Ù„Ø®Øµ</div>
                            </div>
                            
                            <div class="metric-card">
                                <div class="metric-value">92%</div>
                                <div class="metric-label">Ø¯Ù‚Ø© Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª</div>
                            </div>
                            
                            <div class="metric-card">
                                <div class="metric-value">2.3s</div>
                                <div class="metric-label">Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</div>
                            </div>
                            
                            <div class="metric-card">
                                <div class="metric-value">95%</div>
                                <div class="metric-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</div>
                            </div>
                            
                            <div class="metric-card">
                                <div class="metric-value">78%</div>
                                <div class="metric-label">Ø¬ÙˆØ¯Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</div>
                            </div>
                            
                            <div class="metric-card">
                                <div class="metric-value">0.15$</div>
                                <div class="metric-label">ØªÙƒÙ„ÙØ© Ù„ÙƒÙ„ ÙˆØ«ÙŠÙ‚Ø©</div>
                            </div>
                        </div>

                        <div class="comparison-table">
                            <h4>ğŸ“Š Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù„</h4>
                            
                            <table class="styled-table">
                                <thead>
                                    <tr>
                                        <th>Ø§Ù„Ù…Ø¬Ø§Ù„</th>
                                        <th>Ø¯Ù‚Ø© Ø§Ù„Ù…Ù„Ø®Øµ</th>
                                        <th>Ø¯Ù‚Ø© Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª</th>
                                        <th>Ù…ØªÙˆØ³Ø· Ø§Ù„ÙˆÙ‚Øª</th>
                                        <th>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Ø§Ù„Ø·Ø¨ÙŠ</strong></td>
                                        <td>91%</td>
                                        <td>95%</td>
                                        <td>2.8s</td>
                                        <td>97%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ</strong></td>
                                        <td>85%</td>
                                        <td>89%</td>
                                        <td>3.1s</td>
                                        <td>93%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Ø§Ù„ØªÙ‚Ù†ÙŠ</strong></td>
                                        <td>89%</td>
                                        <td>94%</td>
                                        <td>2.5s</td>
                                        <td>96%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Ø¹Ø§Ù…</strong></td>
                                        <td>83%</td>
                                        <td>88%</td>
                                        <td>2.0s</td>
                                        <td>94%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="technical-detail">
                            <h4>ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h4>
                            <p>Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªØ¸Ù‡Ø± Ø£Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨ÙŠ ÙŠØ­Ù‚Ù‚ Ø£ÙØ¶Ù„ Ø¯Ù‚Ø© Ø¨Ø³Ø¨Ø¨ ÙˆØ¶ÙˆØ­ Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§ØªØŒ Ø¨ÙŠÙ†Ù…Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙŠØ­ØªØ§Ø¬ Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø¨Ø³Ø¨Ø¨ ØªØ¹Ù‚Ø¯ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø·Ø±Ù‚ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… -->
            <div class="card">
                <h2>ğŸ” Ø·Ø±Ù‚ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h2>
                <div class="card-content">
                    <div class="evaluation-methods">
                        <h4>ğŸ¯ Ù…Ù†Ù‡Ø¬ÙŠØ§Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h4>
                        
                        <div class="method-grid">
                            <div class="method-item">
                                <div class="method-icon">ğŸ¤–</div>
                                <h5>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¢Ù„ÙŠ Ø¨Ø§Ù„Ù€ LLM</h5>
                                <p>Ø§Ø³ØªØ®Ø¯Ù… Ù†Ù…ÙˆØ°Ø¬ Ù„ØºØ© Ø¢Ø®Ø± Ù„ØªÙ‚ÙŠÙŠÙ… Ø¬ÙˆØ¯Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</p>
                                <div class="code-block">
                                    <pre>
class LLMEvaluator:
    def __init__(self, evaluation_llm):
        self.evaluation_llm = evaluation_llm
    
    def evaluate_summary_quality(self, original_text, summary):
        """ØªÙ‚ÙŠÙŠÙ… Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù„Ø®Øµ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… LLM"""
        prompt = f"""
        Ù‚ÙŠÙ… Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªØ§Ù„ÙŠ Ù…Ù† 1-10 Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±:
        1. Ø§Ù„Ø¯Ù‚Ø©: Ù‡Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØµØ­ÙŠØ­Ø©ØŸ
        2. Ø§Ù„Ø´Ù…ÙˆÙ„ÙŠØ©: Ù‡Ù„ ÙŠØºØ·ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ
        3. Ø§Ù„ÙˆØ¶ÙˆØ­: Ù‡Ù„ Ø§Ù„ØµÙŠØ§ØºØ© ÙˆØ§Ø¶Ø­Ø©ØŸ
        4. Ø§Ù„Ø¥ÙŠØ¬Ø§Ø²: Ù‡Ù„ Ø·ÙˆÙ„Ù‡ Ù…Ù†Ø§Ø³Ø¨ØŸ
        
        Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ: {original_text[:300]}...
        Ø§Ù„Ù…Ù„Ø®Øµ: {summary}
        
        Ø£Ø¹Ø·ÙŠ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹ Ø¹Ø¯Ø¯ÙŠØ§Ù‹ Ù…Ù† 1-10 ÙÙ‚Ø·:
        """
        
        response = self.evaluation_llm.complete(prompt)
        try:
            score = float(response.text.strip())
            return min(max(score, 1), 10)
        except:
            return 5.0
    
    def evaluate_entities_completeness(self, text, extracted_entities):
        """ØªÙ‚ÙŠÙŠÙ… Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø©"""
        prompt = f"""
        Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ§Ù„ÙŠ ÙˆØ§Ø­ÙƒÙ… Ø¹Ù„Ù‰ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø©:
        
        Ø§Ù„Ù†Øµ: {text[:300]}...
        Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø©: {extracted_entities}
        
        Ù‡Ù„ Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø©:
        1. Ø´Ø§Ù…Ù„Ø© (ØªØºØ·ÙŠ Ù…Ø¹Ø¸Ù… Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©)ØŸ
        2. Ø¯Ù‚ÙŠÙ‚Ø© (ÙƒÙ„Ù‡Ø§ ØµØ­ÙŠØ­Ø©)ØŸ
        3. Ø°Ø§Øª ØµÙ„Ø© (Ù…Ù‡Ù…Ø© ÙØ¹Ù„Ø§Ù‹)ØŸ
        
        Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ù† 1-10:
        """
        
        response = self.evaluation_llm.complete(prompt)
        try:
            score = float(response.text.strip())
            return min(max(score, 1), 10)
        except:
            return 5.0
                                    </pre>
                                </div>
                            </div>

                            <div class="method-item">
                                <div class="method-icon">ğŸ‘¥</div>
                                <h5>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¨Ø´Ø±ÙŠ</h5>
                                <p>Ø¥Ø´Ø±Ø§Ùƒ Ù…Ø®ØªØµÙŠÙ† Ø¨Ø´Ø±ÙŠÙŠÙ† Ù„ØªÙ‚ÙŠÙŠÙ… Ø¯Ù‚ÙŠÙ‚:</p>
                                <div class="code-block">
                                    <pre>
class HumanEvaluationManager:
    def __init__(self):
        self.evaluation_tasks = []
        self.evaluator_responses = {}
    
    def create_evaluation_task(self, case_id, original_text, extracted_metadata):
        """Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø© ØªÙ‚ÙŠÙŠÙ… Ù„Ù„Ù…Ø®ØªØµ Ø§Ù„Ø¨Ø´Ø±ÙŠ"""
        task = {
            'id': case_id,
            'text_preview': original_text[:200] + "...",
            'summary': extracted_metadata.get('section_summary', ''),
            'entities': extracted_metadata.get('entities', []),
            'questions': extracted_metadata.get('questions_this_excerpt_can_answer', []),
            'evaluation_criteria': {
                'summary_accuracy': 'Ù…Ø¯Ù‰ Ø¯Ù‚Ø© Ø§Ù„Ù…Ù„Ø®Øµ (1-5)',
                'summary_completeness': 'Ù…Ø¯Ù‰ Ø´Ù…ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ù„Ø®Øµ (1-5)',
                'entities_precision': 'Ø¯Ù‚Ø© Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª (1-5)',
                'entities_recall': 'Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª (1-5)',
                'questions_relevance': 'Ù…Ù†Ø§Ø³Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (1-5)'
            }
        }
        
        self.evaluation_tasks.append(task)
        return task
    
    def collect_human_evaluation(self, evaluator_id, task_id, scores):
        """Ø¬Ù…Ø¹ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®ØªØµ Ø§Ù„Ø¨Ø´Ø±ÙŠ"""
        if evaluator_id not in self.evaluator_responses:
            self.evaluator_responses[evaluator_id] = {}
        
        self.evaluator_responses[evaluator_id][task_id] = {
            'scores': scores,
            'timestamp': datetime.now().isoformat(),
            'overall_rating': np.mean(list(scores.values()))
        }
    
    def calculate_inter_evaluator_agreement(self):
        """Ø­Ø³Ø§Ø¨ Ù…Ø¯Ù‰ Ø§Ù„Ø§ØªÙØ§Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù…Ù‚ÙŠÙ…ÙŠÙ†"""
        # Ø­Ø³Ø§Ø¨ Krippendorff's alpha Ø£Ùˆ Ù…Ù‚ÙŠØ§Ø³ Ø¢Ø®Ø±
        agreements = {}
        
        for criterion in ['summary_accuracy', 'entities_precision']:
            scores_by_evaluator = []
            
            for evaluator_data in self.evaluator_responses.values():
                criterion_scores = [
                    task['scores'][criterion] 
                    for task in evaluator_data.values()
                    if criterion in task['scores']
                ]
                scores_by_evaluator.append(criterion_scores)
            
            # Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø·
            if len(scores_by_evaluator) >= 2:
                correlations = []
                for i in range(len(scores_by_evaluator)):
                    for j in range(i+1, len(scores_by_evaluator)):
                        corr = np.corrcoef(scores_by_evaluator[i], scores_by_evaluator[j])[0,1]
                        correlations.append(corr)
                
                agreements[criterion] = np.mean(correlations)
        
        return agreements
                                    </pre>
                                </div>
                            </div>

                            <div class="method-item">
                                <div class="method-icon">ğŸ“Š</div>
                                <h5>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠ</h5>
                                <p>Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù‚Ø§ÙŠÙŠØ³ Ø¥Ø­ØµØ§Ø¦ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø©:</p>
                                <div class="code-block">
                                    <pre>
import numpy as np
from sklearn.metrics import precision_recall_fscore_support
from scipy.stats import pearsonr, spearmanr

class StatisticalEvaluator:
    def __init__(self):
        self.metrics = {}
    
    def calculate_entity_metrics(self, true_entities, predicted_entities):
        """Ø­Ø³Ø§Ø¨ Precision, Recall, F1 Ù„Ù„ÙƒÙŠØ§Ù†Ø§Øª"""
        # ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø©
        true_set = set(true_entities)
        pred_set = set(predicted_entities)
        
        # True Positives: Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
        tp = len(true_set.intersection(pred_set))
        
        # False Positives: Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©
        fp = len(pred_set - true_set)
        
        # False Negatives: Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©
        fn = len(true_set - pred_set)
        
        # Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³
        precision = tp / (tp + fp) if (tp + fp) > 0 else 0
        recall = tp / (tp + fn) if (tp + fn) > 0 else 0
        f1 = 2 * (precision * recall) / (precision + recall) if (precision + recall) > 0 else 0
        
        return {
            'precision': precision,
            'recall': recall,
            'f1_score': f1,
            'true_positives': tp,
            'false_positives': fp,
            'false_negatives': fn
        }
    
    def calculate_text_similarity_metrics(self, reference_texts, generated_texts):
        """Ø­Ø³Ø§Ø¨ Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„ØªØ´Ø§Ø¨Ù‡ Ø§Ù„Ù†ØµÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©"""
        from rouge_score import rouge_scorer
        
        scorer = rouge_scorer.RougeScorer(['rouge1', 'rouge2', 'rougeL'], use_stemmer=True)
        
        rouge_scores = []
        
        for ref, gen in zip(reference_texts, generated_texts):
            scores = scorer.score(ref, gen)
            rouge_scores.append({
                'rouge1_f': scores['rouge1'].fmeasure,
                'rouge2_f': scores['rouge2'].fmeasure,
                'rougeL_f': scores['rougeL'].fmeasure
            })
        
        # Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªÙˆØ³Ø·Ø§Øª
        avg_scores = {}
        for metric in ['rouge1_f', 'rouge2_f', 'rougeL_f']:
            avg_scores[metric] = np.mean([score[metric] for score in rouge_scores])
        
        return avg_scores
    
    def statistical_significance_test(self, baseline_scores, new_scores):
        """Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¯Ù„Ø§Ù„Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© Ù„Ù„ØªØ­Ø³Ù†"""
        from scipy.stats import ttest_rel
        
        # Ø§Ø®ØªØ¨Ø§Ø± t Ù„Ù„Ø¹ÙŠÙ†Ø§Øª Ø§Ù„Ù…ØªØ±Ø§Ø¨Ø·Ø©
        statistic, p_value = ttest_rel(new_scores, baseline_scores)
        
        return {
            'statistic': statistic,
            'p_value': p_value,
            'significant': p_value < 0.05,
            'improvement': np.mean(new_scores) > np.mean(baseline_scores)
        }
                                    </pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="highlight-box">
                        <h4>ğŸ’¡ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª Ù„Ù„ØªÙ‚ÙŠÙŠÙ…</h4>
                        <ul>
                            <li><strong>ØªÙ†ÙˆÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong> Ø§Ø®ØªØ¨Ø± Ø¹Ù„Ù‰ Ù†ØµÙˆØµ Ù…ØªÙ†ÙˆØ¹Ø© Ù…Ù† Ù…Ø¬Ø§Ù„Ø§Øª Ù…Ø®ØªÙ„ÙØ©</li>
                            <li><strong>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø³ØªÙ…Ø±:</strong> Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø¨Ø§Ù†ØªØ¸Ø§Ù… ÙˆÙ„ÙŠØ³ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</li>
                            <li><strong>Ù…Ù‚Ø§ÙŠÙŠØ³ Ù…ØªØ¹Ø¯Ø¯Ø©:</strong> Ù„Ø§ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…Ù‚ÙŠØ§Ø³ ÙˆØ§Ø­Ø¯ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø¹Ø¯Ø© Ù…Ø¤Ø´Ø±Ø§Øª</li>
                            <li><strong>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¨Ø´Ø±ÙŠ:</strong> Ø£Ø´Ø±Ùƒ Ø®Ø¨Ø±Ø§Ø¡ Ø¨Ø´Ø±ÙŠÙŠÙ† Ù„Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>