<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Summary Index - Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø¹Ø´Ø±: Ø§Ø³ØªÙƒØ´Ø§Ù ÙˆØ­Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 2rem;
        }

        .card {
            background: white;
            margin: 1.5rem 0;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .card h2 {
            background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
            color: white;
            padding: 1.5rem;
            margin: 0;
            font-size: 1.8em;
            border-top: 5px solid #667eea;
        }

        .card-content {
            padding: 1.5rem;
        }

        .code-block {
            background: #2d3436;
            color: #ddd;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            overflow-x: auto;
            direction: ltr;
            text-align: left;
            font-family: 'Courier New', monospace;
            border-left: 5px solid #00b894;
        }

        .error-box {
            background: linear-gradient(135deg, #d63031 0%, #e17055 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #a4161a;
        }

        .solution-box {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #00a085;
        }

        .warning-box {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #d63031;
        }

        .info-box {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #2d3436;
        }

        .debug-box {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #5f3dc4;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 1rem;
            }

            .code-block {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ Ø§Ø³ØªÙƒØ´Ø§Ù ÙˆØ­Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</h1>
            <p>Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø¹Ø´Ø±: Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„ Document Summary Index</p>
        </div>

        <div class="content">
            <div class="card">
                <h2>ğŸš¨ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙˆØ­Ù„ÙˆÙ„Ù‡Ø§</h2>
                <div class="card-content">
                    <div class="error-box">
                        <h4>âŒ Ø®Ø·Ø£: "OpenAI API key not found"</h4>
                        <p><strong>Ø§Ù„Ø³Ø¨Ø¨:</strong> Ù…ÙØªØ§Ø­ API ØºÙŠØ± Ù…Ø­Ø¯Ø¯ Ø£Ùˆ Ø®Ø§Ø·Ø¦</p>
                        <p><strong>Ø§Ù„ØªØ£Ø«ÙŠØ±:</strong> ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ embeddings Ø£Ùˆ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ LLM</p>
                    </div>

                    <div class="solution-box">
                        <h4>âœ… Ø§Ù„Ø­Ù„ Ø§Ù„Ø´Ø§Ù…Ù„</h4>
                        <div class="code-block">
import os
from dotenv import load_dotenv

# ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
load_dotenv()

def verify_api_keys():
    """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ù…ÙØ§ØªÙŠØ­ API"""
    
    # ÙØ­Øµ Ù…ÙØªØ§Ø­ OpenAI
    openai_key = os.getenv("OPENAI_API_KEY")
    
    if not openai_key:
        print("âŒ Ù…ÙØªØ§Ø­ OpenAI API ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯")
        print("ğŸ’¡ Ø§Ù„Ø­Ù„ÙˆÙ„:")
        print("1. Ø£Ù†Ø´Ø¦ Ù…Ù„Ù .env ÙˆØ£Ø¶Ù: OPENAI_API_KEY=your_key_here")
        print("2. Ø£Ùˆ Ø§Ø¶Ø¨Ø· Ù…ØªØºÙŠØ± Ø§Ù„Ø¨ÙŠØ¦Ø©: export OPENAI_API_KEY=your_key")
        return False
    
    elif openai_key.startswith("sk-") and len(openai_key) > 20:
        print("âœ… Ù…ÙØªØ§Ø­ OpenAI API ØµØ­ÙŠØ­")
        
        # Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙØªØ§Ø­
        try:
            from llama_index.llms.openai import OpenAI
            llm = OpenAI(api_key=openai_key)
            response = llm.complete("test")
            print("âœ… Ø§Ù„Ù…ÙØªØ§Ø­ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­")
            return True
        except Exception as e:
            print(f"âŒ Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠØ± ØµØ§Ù„Ø­: {str(e)}")
            return False
    
    else:
        print("âŒ ØªÙ†Ø³ÙŠÙ‚ Ù…ÙØªØ§Ø­ OpenAI ØºÙŠØ± ØµØ­ÙŠØ­")
        print("ğŸ’¡ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ sk- ÙˆÙŠÙƒÙˆÙ† Ø·ÙˆÙ„Ù‡ Ù…Ù†Ø§Ø³Ø¨")
        return False

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙØ§ØªÙŠØ­
if verify_api_keys():
    print("ğŸ¯ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø£Ù…Ø§Ù†")
else:
    print("âš ï¸ ÙŠØ¬Ø¨ Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø£ÙˆÙ„Ø§Ù‹")
                        </div>
                    </div>

                    <div class="error-box">
                        <h4>âŒ Ø®Ø·Ø£: "Rate limit exceeded"</h4>
                        <p><strong>Ø§Ù„Ø³Ø¨Ø¨:</strong> ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©</p>
                        <p><strong>Ø§Ù„ØªØ£Ø«ÙŠØ±:</strong> ÙØ´Ù„ Ù…Ø¤Ù‚Øª ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª</p>
                    </div>

                    <div class="solution-box">
                        <h4>âœ… Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h4>
                        <div class="code-block">
import time
from functools import wraps
from typing import Any, Callable
import random

class RateLimitManager:
    def __init__(self, calls_per_minute: int = 50):
        self.calls_per_minute = calls_per_minute
        self.call_times = []
        self.min_interval = 60.0 / calls_per_minute  # Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø¨ÙŠÙ† Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª
        
    def wait_if_needed(self):
        """Ø§Ù†ØªØ¸Ø§Ø± Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ø±ØªÙØ¹"""
        
        current_time = time.time()
        
        # Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (Ø£ÙƒØ«Ø± Ù…Ù† Ø¯Ù‚ÙŠÙ‚Ø©)
        self.call_times = [t for t in self.call_times if current_time - t < 60]
        
        # ÙØ­Øµ Ø¥Ø°Ø§ ÙƒÙ†Ø§ Ù‚Ø±ÙŠØ¨ÙŠÙ† Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰
        if len(self.call_times) >= self.calls_per_minute:
            # Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±
            oldest_call = min(self.call_times)
            wait_time = 60 - (current_time - oldest_call)
            
            if wait_time > 0:
                print(f"â³ Ø§Ù†ØªØ¸Ø§Ø± {wait_time:.1f} Ø«Ø§Ù†ÙŠØ© Ù„ØªØ¬Ù†Ø¨ rate limit")
                time.sleep(wait_time + 0.1)  # Ù…Ø¹ Ù‡Ø§Ù…Ø´ Ø£Ù…Ø§Ù†
        
        # ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠ
        self.call_times.append(time.time())

def with_rate_limit(rate_manager: RateLimitManager):
    """decorator Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"""
    
    def decorator(func: Callable) -> Callable:
        @wraps(func)
        def wrapper(*args, **kwargs) -> Any:
            rate_manager.wait_if_needed()
            
            try:
                return func(*args, **kwargs)
            except Exception as e:
                if "rate limit" in str(e).lower():
                    print("ğŸ’¤ ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ØŒ Ø§Ù†ØªØ¸Ø§Ø± 60 Ø«Ø§Ù†ÙŠØ©...")
                    time.sleep(60)
                    return func(*args, **kwargs)  # Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                else:
                    raise e
        
        return wrapper
    return decorator

# Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¯ÙŠØ± Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
rate_manager = RateLimitManager(calls_per_minute=30)  # 30 Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©

@with_rate_limit(rate_manager)
def safe_llm_call(llm, prompt):
    """Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¢Ù…Ù† Ù„Ù„Ù€ LLM Ù…Ø¹ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"""
    return llm.complete(prompt)

print("âœ… Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¬Ø§Ù‡Ø²")
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ” ØªØ´Ø®ÙŠØµ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡</h2>
                <div class="card-content">
                    <div class="debug-box">
                        <h4>ğŸ”¬ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h4>
                        <div class="code-block">
import psutil
import time
from typing import Dict, List
import traceback

class PerformanceDiagnostics:
    def __init__(self):
        self.diagnostics_log = []
        
    def diagnose_slow_indexing(self, documents: List, expected_time: float = 60):
        """ØªØ´Ø®ÙŠØµ Ø¨Ø·Ø¡ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ index"""
        
        print("ğŸ” ØªØ´Ø®ÙŠØµ Ù…Ø´Ø§ÙƒÙ„ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ Index...")
        
        issues = []
        
        # 1. ÙØ­Øµ Ø­Ø¬Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
        total_size = sum(len(doc.text) for doc in documents)
        avg_doc_size = total_size / len(documents)
        
        if avg_doc_size > 10000:  # Ø£ÙƒØ¨Ø± Ù…Ù† 10KB
            issues.append({
                'type': 'large_documents',
                'severity': 'medium',
                'message': f'Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙƒØ¨ÙŠØ±Ø© (Ù…ØªÙˆØ³Ø· {avg_doc_size/1000:.1f}KB)',
                'solution': 'Ø§Ø³ØªØ®Ø¯Ù… text splitting Ø£Ùˆ chunking'
            })
        
        # 2. ÙØ­Øµ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
        if len(documents) > 100:
            issues.append({
                'type': 'many_documents',
                'severity': 'medium',
                'message': f'Ø¹Ø¯Ø¯ ÙƒØ¨ÙŠØ± Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª ({len(documents)})',
                'solution': 'Ø§Ø³ØªØ®Ø¯Ù… batch processing Ø£Ùˆ parallel processing'
            })
        
        # 3. ÙØ­Øµ Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…
        memory = psutil.virtual_memory()
        if memory.percent > 80:
            issues.append({
                'type': 'low_memory',
                'severity': 'high',
                'message': f'Ø°Ø§ÙƒØ±Ø© Ù…Ù†Ø®ÙØ¶Ø© ({memory.percent:.1f}% Ù…Ø³ØªØ®Ø¯Ù…Ø©)',
                'solution': 'Ø£ØºÙ„Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ù€ batches Ø£ØµØºØ±'
            })
        
        # 4. ÙØ­Øµ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬
        cpu_percent = psutil.cpu_percent(interval=1)
        if cpu_percent > 90:
            issues.append({
                'type': 'high_cpu',
                'severity': 'medium',
                'message': f'Ù…Ø¹Ø§Ù„Ø¬ Ù…Ø«Ù‚Ù„ ({cpu_percent:.1f}%)',
                'solution': 'Ù‚Ù„Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠØ©'
            })
        
        return issues
    
    def diagnose_slow_queries(self, query_times: List[float]):
        """ØªØ´Ø®ÙŠØµ Ø¨Ø·Ø¡ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª"""
        
        print("ğŸ” ØªØ´Ø®ÙŠØµ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª...")
        
        issues = []
        avg_time = sum(query_times) / len(query_times)
        
        if avg_time > 10:  # Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø«ÙˆØ§Ù†ÙŠ
            issues.append({
                'type': 'slow_queries',
                'severity': 'high',
                'message': f'Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø¨Ø·ÙŠØ¦Ø© (Ù…ØªÙˆØ³Ø· {avg_time:.1f}s)',
                'solutions': [
                    'Ø§Ø³ØªØ®Ø¯Ù… embedding-based retrieval Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† LLM-based',
                    'Ù‚Ù„Ù„ similarity_top_k',
                    'Ø§Ø³ØªØ®Ø¯Ù… Ù†Ù…Ø§Ø°Ø¬ Ø£Ø³Ø±Ø¹',
                    'ØªØ­Ø³ÙŠÙ† prompts Ù„ØªÙƒÙˆÙ† Ø£Ù‚ØµØ±'
                ]
            })
        
        # ÙØ­Øµ Ø§Ù„ØªØ¨Ø§ÙŠÙ† ÙÙŠ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
        max_time = max(query_times)
        min_time = min(query_times)
        
        if max_time / min_time > 5:  # ØªØ¨Ø§ÙŠÙ† ÙƒØ¨ÙŠØ±
            issues.append({
                'type': 'inconsistent_performance',
                'severity': 'medium',
                'message': f'Ø£Ø¯Ø§Ø¡ ØºÙŠØ± Ù…Ù†ØªØ¸Ù… (Ù…Ù† {min_time:.1f}s Ø¥Ù„Ù‰ {max_time:.1f}s)',
                'solutions': [
                    'ÙØ­Øµ network connectivity',
                    'Ø§Ø³ØªØ®Ø¯Ø§Ù… caching Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©',
                    'ØªØ­Ø³ÙŠÙ† Ø­Ø¬Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙØ±Ø³Ù„Ø© Ù„Ù„Ù€ LLM'
                ]
            })
        
        return issues
    
    def diagnose_memory_issues(self):
        """ØªØ´Ø®ÙŠØµ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø°Ø§ÙƒØ±Ø©"""
        
        print("ğŸ” ØªØ´Ø®ÙŠØµ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø°Ø§ÙƒØ±Ø©...")
        
        issues = []
        memory = psutil.virtual_memory()
        
        # ÙØ­Øµ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©
        if memory.available < 1024 * 1024 * 1024:  # Ø£Ù‚Ù„ Ù…Ù† 1GB
            issues.append({
                'type': 'low_available_memory',
                'severity': 'high',
                'message': f'Ø°Ø§ÙƒØ±Ø© Ù…ØªØ§Ø­Ø© Ù‚Ù„ÙŠÙ„Ø© ({memory.available/1024/1024/1024:.1f}GB)',
                'solutions': [
                    'Ø£ØºÙ„Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰',
                    'Ø§Ø³ØªØ®Ø¯Ù… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ù€ chunks Ø£ØµØºØ±',
                    'ÙØ¹Ù„ garbage collection Ø¨Ø§Ù†ØªØ¸Ø§Ù…',
                    'Ø§Ø³ØªØ®Ø¯Ù… streaming Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©'
                ]
            })
        
        return issues
    
    def run_full_diagnosis(self, documents=None, query_times=None):
        """ØªØ´Ø®ÙŠØµ Ø´Ø§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©"""
        
        print("ğŸ” Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø´Ø§Ù…Ù„...")
        print("=" * 50)
        
        all_issues = []
        
        # ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù…
        system_issues = self.diagnose_memory_issues()
        all_issues.extend(system_issues)
        
        # ØªØ´Ø®ÙŠØµ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
        if documents:
            indexing_issues = self.diagnose_slow_indexing(documents)
            all_issues.extend(indexing_issues)
        
        # ØªØ´Ø®ÙŠØµ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª
        if query_times:
            query_issues = self.diagnose_slow_queries(query_times)
            all_issues.extend(query_issues)
        
        # Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        if not all_issues:
            print("âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§ÙƒÙ„ ÙˆØ§Ø¶Ø­Ø© ÙÙŠ Ø§Ù„Ø£Ø¯Ø§Ø¡")
        else:
            print(f"âš ï¸ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ {len(all_issues)} Ù…Ø´ÙƒÙ„Ø©:")
            
            for issue in all_issues:
                severity_icon = "ğŸ”´" if issue['severity'] == 'high' else "ğŸŸ¡"
                print(f"\n{severity_icon} {issue['message']}")
                
                if isinstance(issue.get('solution'), str):
                    print(f"   ğŸ’¡ Ø§Ù„Ø­Ù„: {issue['solution']}")
                elif isinstance(issue.get('solutions'), list):
                    print("   ğŸ’¡ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:")
                    for solution in issue['solutions']:
                        print(f"   - {solution}")
        
        return all_issues

# Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´Ø®ÙŠØµ
diagnostics = PerformanceDiagnostics()

# ØªØ´Ø®ÙŠØµ ØªØ¬Ø±ÙŠØ¨ÙŠ (Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©)
print("ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´Ø®ÙŠØµ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…")

# Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:
# issues = diagnostics.run_full_diagnosis()
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ› ï¸ Ø£Ø¯ÙˆØ§Øª Debug Ù…ØªÙ‚Ø¯Ù…Ø©</h2>
                <div class="card-content">
                    <div class="code-block">
# Ù†Ø¸Ø§Ù… debug Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ù€ Document Summary Index
import logging
import json
from datetime import datetime
import inspect

class AdvancedDebugger:
    def __init__(self, debug_level="INFO"):
        self.debug_level = debug_level
        self.setup_logging()
        self.call_trace = []
        
    def setup_logging(self):
        """Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù… logging Ù…ÙØµÙ„"""
        
        # Ø¥Ù†Ø´Ø§Ø¡ logger Ù…Ø®ØµØµ
        self.logger = logging.getLogger("DocumentSummaryDebug")
        self.logger.setLevel(getattr(logging, self.debug_level))
        
        # Ø¥Ù†Ø´Ø§Ø¡ handler Ù„Ù„Ù…Ù„Ù
        file_handler = logging.FileHandler(
            f"debug_log_{datetime.now().strftime('%Y%m%d_%H%M%S')}.log",
            encoding='utf-8'
        )
        
        # Ø¥Ù†Ø´Ø§Ø¡ handler Ù„Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„
        console_handler = logging.StreamHandler()
        
        # ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        formatter = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        )
        file_handler.setFormatter(formatter)
        console_handler.setFormatter(formatter)
        
        self.logger.addHandler(file_handler)
        self.logger.addHandler(console_handler)
        
        self.logger.info("ğŸ”§ Ù†Ø¸Ø§Ù… Debug Ù…ØªÙ‚Ø¯Ù… ØªÙ… ØªÙØ¹ÙŠÙ„Ù‡")
    
    def trace_function_calls(self, func):
        """ØªØªØ¨Ø¹ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª Ø§Ù„Ø¯ÙˆØ§Ù„"""
        
        def wrapper(*args, **kwargs):
            # ØªØ³Ø¬ÙŠÙ„ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡
            start_time = time.time()
            func_name = func.__name__
            
            self.logger.info(f"ğŸ”µ Ø¨Ø¯Ø§ÙŠØ© {func_name}")
            self.logger.debug(f"   Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: args={len(args)}, kwargs={list(kwargs.keys())}")
            
            try:
                # ØªÙ†ÙÙŠØ° Ø§Ù„Ø¯Ø§Ù„Ø©
                result = func(*args, **kwargs)
                
                # ØªØ³Ø¬ÙŠÙ„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡
                end_time = time.time()
                duration = end_time - start_time
                
                self.logger.info(f"âœ… Ø§Ù†ØªÙ‡Ù‰ {func_name} ÙÙŠ {duration:.2f}s")
                
                # Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡
                call_info = {
                    'function': func_name,
                    'start_time': start_time,
                    'duration': duration,
                    'success': True,
                    'result_type': type(result).__name__
                }
                self.call_trace.append(call_info)
                
                return result
                
            except Exception as e:
                # ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
                end_time = time.time()
                duration = end_time - start_time
                
                self.logger.error(f"âŒ Ø®Ø·Ø£ ÙÙŠ {func_name} Ø¨Ø¹Ø¯ {duration:.2f}s: {str(e)}")
                
                # ØªØ³Ø¬ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£
                error_details = {
                    'function': func_name,
                    'start_time': start_time,
                    'duration': duration,
                    'success': False,
                    'error': str(e),
                    'error_type': type(e).__name__
                }
                self.call_trace.append(error_details)
                
                # Ø¥Ø¹Ø§Ø¯Ø© Ø±ÙØ¹ Ø§Ù„Ø®Ø·Ø£
                raise e
        
        return wrapper
    
    def debug_document_processing(self, documents):
        """debug Ù…ÙØµÙ„ Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª"""
        
        self.logger.info(f"ğŸ“„ Ø¨Ø¯Ø§ÙŠØ© debug Ù…Ø¹Ø§Ù„Ø¬Ø© {len(documents)} Ù…Ø³ØªÙ†Ø¯")
        
        for i, doc in enumerate(documents):
            self.logger.debug(f"Ù…Ø³ØªÙ†Ø¯ {i+1}:")
            self.logger.debug(f"   Ø§Ù„Ø·ÙˆÙ„: {len(doc.text)} Ø­Ø±Ù")
            self.logger.debug(f"   Ø£ÙˆÙ„ 50 Ø­Ø±Ù: {doc.text[:50]}...")
            
            # ÙØ­Øµ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©
            if len(doc.text) < 10:
                self.logger.warning(f"   âš ï¸ Ù…Ø³ØªÙ†Ø¯ Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹ ({len(doc.text)} Ø£Ø­Ø±Ù)")
            
            if len(doc.text) > 50000:
                self.logger.warning(f"   âš ï¸ Ù…Ø³ØªÙ†Ø¯ Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹ ({len(doc.text)} Ø£Ø­Ø±Ù)")
            
            # ÙØ­Øµ Ø§Ù„ØªØ±Ù…ÙŠØ²
            try:
                doc.text.encode('utf-8')
            except UnicodeEncodeError as e:
                self.logger.error(f"   âŒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ ØªØ±Ù…ÙŠØ² Ø§Ù„Ù…Ø³ØªÙ†Ø¯: {str(e)}")
    
    def debug_query_process(self, query, retrieval_mode, top_k):
        """debug Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…"""
        
        self.logger.info(f"ğŸ” debug Ø§Ø³ØªØ¹Ù„Ø§Ù…: '{query[:50]}...'")
        self.logger.info(f"   Ù†ÙˆØ¹ Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹: {retrieval_mode}")
        self.logger.info(f"   Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬: {top_k}")
        
        # ÙØ­Øµ Ø·ÙˆÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
        if len(query) < 3:
            self.logger.warning("âš ï¸ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹ Ù‚Ø¯ Ù„Ø§ ÙŠØ¹Ø·ÙŠ Ù†ØªØ§Ø¦Ø¬ Ø¬ÙŠØ¯Ø©")
        
        if len(query) > 500:
            self.logger.warning("âš ï¸ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø·ÙˆÙŠÙ„ Ù‚Ø¯ ÙŠØ¨Ø·Ø¦ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©")
    
    def generate_debug_report(self):
        """ØªÙ‚Ø±ÙŠØ± debug Ø´Ø§Ù…Ù„"""
        
        print("\nğŸ” ØªÙ‚Ø±ÙŠØ± Debug Ø§Ù„Ø´Ø§Ù…Ù„")
        print("=" * 60)
        
        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª
        total_calls = len(self.call_trace)
        successful_calls = sum(1 for call in self.call_trace if call['success'])
        failed_calls = total_calls - successful_calls
        
        print(f"ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª:")
        print(f"   Ø¥Ø¬Ù…Ø§Ù„ÙŠ: {total_calls}")
        print(f"   Ù†Ø¬Ø­: {successful_calls}")
        print(f"   ÙØ´Ù„: {failed_calls}")
        
        if self.call_trace:
            # Ø£Ø¨Ø·Ø£ Ø§Ù„Ø¯ÙˆØ§Ù„
            slowest = max(self.call_trace, key=lambda x: x['duration'])
            print(f"\nğŸŒ Ø£Ø¨Ø·Ø£ Ø¯Ø§Ù„Ø©: {slowest['function']} ({slowest['duration']:.2f}s)")
            
            # Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
            errors = [call for call in self.call_trace if not call['success']]
            if errors:
                print(f"\nâŒ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ({len(errors)}):")
                for error in errors[-5:]:  # Ø¢Ø®Ø± 5 Ø£Ø®Ø·Ø§Ø¡
                    print(f"   {error['function']}: {error['error']}")
        
        # Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ Ù…Ù„Ù
        report_file = f"debug_report_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
        with open(report_file, 'w', encoding='utf-8') as f:
            json.dump({
                'timestamp': datetime.now().isoformat(),
                'summary': {
                    'total_calls': total_calls,
                    'successful_calls': successful_calls,
                    'failed_calls': failed_calls
                },
                'call_trace': self.call_trace
            }, f, indent=2, ensure_ascii=False)
        
        print(f"\nğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ: {report_file}")

# Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… debug
debugger = AdvancedDebugger(debug_level="DEBUG")

# Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… decorator
@debugger.trace_function_calls
def example_function(text):
    """Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø¯Ø§Ù„Ø© Ù…Ø¹ ØªØªØ¨Ø¹"""
    time.sleep(0.1)  # Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø¹Ø§Ù„Ø¬Ø©
    return f"Ù…Ø¹Ø§Ù„Ø¬: {text}"

# Ø§Ø®ØªØ¨Ø§Ø±
# result = example_function("Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ")
print("ğŸ”§ Ù†Ø¸Ø§Ù… Debug Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…")
                    </div>

                    <div class="debug-box">
                        <h4>ğŸ¯ Ù…Ù…ÙŠØ²Ø§Øª Ù†Ø¸Ø§Ù… Debug Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h4>
                        <ul>
                            <li><strong>ØªØªØ¨Ø¹ Ø´Ø§Ù…Ù„:</strong> Ù…Ø±Ø§Ù‚Ø¨Ø© ÙƒÙ„ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¯Ø§Ù„Ø©</li>
                            <li><strong>logging Ù…ÙØµÙ„:</strong> Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</li>
                            <li><strong>ØªÙ‚Ø§Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:</strong> Ù…Ù„Ø®Øµ Ø´Ø§Ù…Ù„ Ù„Ù„Ø£Ø¯Ø§Ø¡</li>
                            <li><strong>ÙØ­Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠ:</strong> Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ“‹ Ø¯Ù„ÙŠÙ„ Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©</h2>
                <div class="card-content">
                    <div class="info-box">
                        <h4>ğŸ” Ù…Ù†Ù‡Ø¬ÙŠØ© Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„</h4>
                        <ol>
                            <li><strong>ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</strong> Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¸Ø§Ù‡Ø±ØŸ</li>
                            <li><strong>Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª:</strong> logsØŒ error messagesØŒ Ø£Ø¯Ø§Ø¡</li>
                            <li><strong>ØªØ´Ø®ÙŠØµ Ø§Ù„Ø³Ø¨Ø¨:</strong> Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ</li>
                            <li><strong>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„:</strong> ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨</li>
                            <li><strong>Ø§Ù„ØªØ­Ù‚Ù‚:</strong> Ø§Ø®ØªØ¨Ø§Ø± Ø£Ù† Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù†Ø­Ù„Øª</li>
                            <li><strong>Ø§Ù„ØªÙˆØ«ÙŠÙ‚:</strong> ÙƒØªØ§Ø¨Ø© Ù…Ø§ ØªÙ… Ø¥ØµÙ„Ø§Ø­Ù‡</li>
                        </ol>
                    </div>

                    <div class="code-block">
# Ù†Ø¸Ø§Ù… Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
class AutoTroubleshooter:
    def __init__(self):
        self.solutions_db = {
            'api_key_error': [
                'ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù .env',
                'Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ù…ÙØªØ§Ø­ API',
                'ÙØ­Øµ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©'
            ],
            'rate_limit_error': [
                'ØªØ·Ø¨ÙŠÙ‚ rate limiting',
                'Ø§Ø³ØªØ®Ø¯Ø§Ù… exponential backoff',
                'ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠØ©'
            ],
            'memory_error': [
                'ØªÙ‚Ù„ÙŠÙ„ batch size',
                'Ø§Ø³ØªØ®Ø¯Ø§Ù… garbage collection',
                'Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù€ chunks'
            ],
            'slow_performance': [
                'ØªØ­Ø³ÙŠÙ† embedding dimensions',
                'Ø§Ø³ØªØ®Ø¯Ø§Ù… caching',
                'ØªØ­Ø³ÙŠÙ† database queries'
            ]
        }
    
    def auto_diagnose_and_fix(self, error_message: str, symptoms: List[str]):
        """ØªØ´Ø®ÙŠØµ ÙˆØ¥ØµÙ„Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø´Ø§ÙƒÙ„"""
        
        print(f"ğŸ” ØªØ´Ø®ÙŠØµ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø´ÙƒÙ„Ø©: {error_message}")
        
        # ØªØ­Ù„ÙŠÙ„ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
        error_type = self._classify_error(error_message)
        
        print(f"ğŸ“‹ ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: {error_type}")
        
        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø­Ù„ÙˆÙ„
        solutions = self.solutions_db.get(error_type, ['ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ'])
        
        print("ğŸ’¡ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:")
        for i, solution in enumerate(solutions, 1):
            print(f"   {i}. {solution}")
        
        # ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        auto_fixes = self._get_auto_fixes(error_type)
        
        if auto_fixes:
            print("\nğŸ”§ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:")
            for fix_name, fix_func in auto_fixes.items():
                try:
                    print(f"   ØªØ·Ø¨ÙŠÙ‚: {fix_name}")
                    fix_func()
                    print(f"   âœ… Ù†Ø¬Ø­: {fix_name}")
                except Exception as e:
                    print(f"   âŒ ÙØ´Ù„ {fix_name}: {str(e)}")
        
        return solutions
    
    def _classify_error(self, error_message: str) -> str:
        """ØªØµÙ†ÙŠÙ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·Ø£"""
        
        error_message_lower = error_message.lower()
        
        if 'api key' in error_message_lower:
            return 'api_key_error'
        elif 'rate limit' in error_message_lower:
            return 'rate_limit_error'
        elif 'memory' in error_message_lower:
            return 'memory_error'
        elif 'timeout' in error_message_lower or 'slow' in error_message_lower:
            return 'slow_performance'
        else:
            return 'unknown_error'
    
    def _get_auto_fixes(self, error_type: str) -> Dict:
        """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥ØµÙ„Ø§Ø­Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©"""
        
        auto_fixes = {}
        
        if error_type == 'memory_error':
            auto_fixes['clear_cache'] = self._clear_cache
            auto_fixes['garbage_collect'] = self._force_garbage_collection
        
        elif error_type == 'rate_limit_error':
            auto_fixes['add_delay'] = lambda: time.sleep(5)
        
        return auto_fixes
    
    def _clear_cache(self):
        """Ù…Ø³Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª"""
        import gc
        gc.collect()
        print("   ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª")
    
    def _force_garbage_collection(self):
        """ØªØ´ØºÙŠÙ„ garbage collection Ù‚ÙˆÙŠ"""
        import gc
        for _ in range(3):
            gc.collect()
        print("   ğŸ§¹ ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø°Ø§ÙƒØ±Ø©")

# Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
troubleshooter = AutoTroubleshooter()

# Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
print("ğŸ”§ Ù†Ø¸Ø§Ù… Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¬Ø§Ù‡Ø²")

# troubleshooter.auto_diagnose_and_fix(
#     "OpenAI API key not found", 
#     ["ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ embeddings", "Ø®Ø·Ø£ ÙÙŠ LLM calls"]
# )
                    </code>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h2>
                <div class="card-content">
                    <div class="solution-box">
                        <h4>âœ… Ø­Ù„ Ù…Ø´ÙƒÙ„Ø©: "Index corrupted"</h4>
                        <div class="code-block">
def fix_corrupted_index(index_path: str):
    """Ø¥ØµÙ„Ø§Ø­ index ØªØ§Ù„Ù"""
    
    print("ğŸ”§ Ø¥ØµÙ„Ø§Ø­ index ØªØ§Ù„Ù...")
    
    try:
        # Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ index
        from llama_index.core import StorageContext, load_index_from_storage
        storage_context = StorageContext.from_defaults(persist_dir=index_path)
        index = load_index_from_storage(storage_context)
        print("âœ… Ø§Ù„Ù€ Index ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ")
        return index
        
    except Exception as e:
        print(f"âŒ Index ØªØ§Ù„Ù: {str(e)}")
        
        # Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥ØµÙ„Ø§Ø­
        backup_path = f"{index_path}_backup_{int(time.time())}"
        
        # Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        import shutil
        if os.path.exists(index_path):
            shutil.copytree(index_path, backup_path)
            print(f"ğŸ’¾ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙÙŠ {backup_path}")
        
        # Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
        print("ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ Index...")
        return None  # ÙŠØ­ØªØ§Ø¬ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ ÙƒØ§Ù…Ù„

print("ğŸ”§ Ø¯Ø§Ù„Ø© Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù€ Index Ø¬Ø§Ù‡Ø²Ø©")
                        </div>
                    </div>

                    <div class="solution-box">
                        <h4>âœ… Ø­Ù„ Ù…Ø´ÙƒÙ„Ø©: "Embedding mismatch"</h4>
                        <div class="code-block">
def fix_embedding_mismatch():
    """Ø¥ØµÙ„Ø§Ø­ Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ù€ embeddings"""
    
    print("ğŸ”§ Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© embedding mismatch...")
    
    # Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† embedding model
    from llama_index.core import Settings
    from llama_index.embeddings.openai import OpenAIEmbedding
    
    # Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ù…ÙˆØ°Ø¬ embedding Ù…ÙˆØ­Ø¯
    Settings.embed_model = OpenAIEmbedding(
        model="text-embedding-3-small",
        dimensions=1536
    )
    
    print("âœ… ØªÙ… ØªÙˆØ­ÙŠØ¯ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù€ embedding")
    print("ğŸ’¡ ÙŠÙÙ†ØµØ­ Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ index Ø¨Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„ØªØºÙŠÙŠØ±")

print("ğŸ”§ Ø¯Ø§Ù„Ø© Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù€ embedding Ø¬Ø§Ù‡Ø²Ø©")
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>âš ï¸ Ù†ØµØ§Ø¦Ø­ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø´Ø§ÙƒÙ„</h4>
                        <ul>
                            <li><strong>Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù†ØªØ¸Ù…Ø©:</strong> Ø§Ø­ÙØ¸ Ø§Ù„Ù€ index Ø¨Ø§Ù†ØªØ¸Ø§Ù…</li>
                            <li><strong>Ø§Ø®ØªØ¨Ø§Ø± Ø¯ÙˆØ±ÙŠ:</strong> ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…</li>
                            <li><strong>Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯:</strong> ØªØªØ¨Ø¹ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ø¬</li>
                            <li><strong>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª:</strong> Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø±Ø§Øª</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ“‹ Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª</h2>
                <div class="card-content">
                    <div class="solution-box">
                        <h4>âœ… Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø¯Ù„ÙŠÙ„ Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„</h4>
                        <ul>
                            <li>Ù†Ø¸Ø§Ù… ØªØ´Ø®ÙŠØµ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</li>
                            <li>Ø£Ø¯ÙˆØ§Øª debug Ù…ØªÙ‚Ø¯Ù…Ø© Ù…Ø¹ logging Ù…ÙØµÙ„</li>
                            <li>Ø­Ù„ÙˆÙ„ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø£ÙƒØ«Ø± Ø´ÙŠÙˆØ¹Ø§Ù‹</li>
                            <li>Ù†Ø¸Ø§Ù… Ø¥ØµÙ„Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¨Ø³ÙŠØ·Ø©</li>
                            <li>Ù…Ù†Ù‡Ø¬ÙŠØ© ÙˆØ§Ø¶Ø­Ø© Ù„Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©</li>
                        </ul>
                    </div>

                    <div class="info-box">
                        <h4>ğŸ¯ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</h4>
                        <ul>
                            <li><strong>Ø§Ù‚Ø±Ø£ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¨Ø¹Ù†Ø§ÙŠØ©:</strong> Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ ØªØ­ØªÙˆÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù‡Ù…Ø©</li>
                            <li><strong>Ø§Ø³ØªØ®Ø¯Ù… logging:</strong> Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹</li>
                            <li><strong>Ø§Ø®ØªØ¨Ø± ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹:</strong> ØºÙŠØ± Ø´ÙŠØ¡ ÙˆØ§Ø­Ø¯ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©</li>
                            <li><strong>ÙˆØ«Ù‚ Ø§Ù„Ø­Ù„ÙˆÙ„:</strong> Ø§ÙƒØªØ¨ Ø§Ù„Ø­Ù„ÙˆÙ„ Ù„Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„ÙŠÙ‡Ø§</li>
                        </ul>
                    </div>

                    <div class="debug-box">
                        <h4>ğŸš€ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h4>
                        <p>Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø¬Ø²Ø¡ Ø·Ø¨ÙŠØ¹ÙŠ Ù…Ù† Ø§Ù„ØªØ·ÙˆÙŠØ±. Ø§Ù„Ù…Ù‡Ù… Ù‡Ùˆ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ø³ØªØ¹Ø¯ Ø¨Ø§Ù„Ø£Ø¯ÙˆØ§Øª ÙˆØ§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø­Ù„Ù‡Ø§ Ø¨Ø³Ø±Ø¹Ø© ÙˆÙƒÙØ§Ø¡Ø©. Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ ÙƒÙ…Ø±Ø¬Ø¹ ÙˆØ§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù…!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>