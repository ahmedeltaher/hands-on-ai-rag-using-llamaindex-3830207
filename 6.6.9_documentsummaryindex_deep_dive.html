<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Summary Index - Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ§Ø³Ø¹: Ø§Ù„Ù€ DocumentSummaryIndex ÙÙŠ LlamaIndex</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 2rem;
        }

        .card {
            background: white;
            margin: 1.5rem 0;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .card h2 {
            background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
            color: white;
            padding: 1.5rem;
            margin: 0;
            font-size: 1.8em;
            border-top: 5px solid #667eea;
        }

        .card-content {
            padding: 1.5rem;
        }

        .code-block {
            background: #2d3436;
            color: #ddd;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            overflow-x: auto;
            direction: ltr;
            text-align: left;
            font-family: 'Courier New', monospace;
            border-left: 5px solid #00b894;
        }

        .highlight-box {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #00a085;
        }

        .warning-box {
            background: linear-gradient(135deg, #e17055 0%, #fab1a0 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #d63031;
        }

        .info-box {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #2d3436;
        }

        .technical-detail {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 5px solid #d63031;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 1rem;
            }

            .code-block {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š DocumentSummaryIndex ÙÙŠ LlamaIndex</h1>
            <p>Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ§Ø³Ø¹: ÙÙ‡Ù… Ø¹Ù…ÙŠÙ‚ Ù„Ù„ÙƒÙ„Ø§Ø³ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙˆØ®ØµØ§Ø¦ØµÙ‡</p>
        </div>

        <div class="content">
            <div class="card">
                <h2>ğŸ¯ Ù…Ù‚Ø¯Ù…Ø© DocumentSummaryIndex</h2>
                <div class="card-content">
                    <p>Ø¯Ù„ÙˆÙ‚ØªÙŠ Ù‡Ù†Ø¯Ø®Ù„ ÙÙŠ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù€ DocumentSummaryIndex ÙƒÙ…Ø§ Ù‡Ùˆ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù…ÙƒØªØ¨Ø© LlamaIndex:</p>

                    <div class="highlight-box">
                        <h4>ğŸ’¡ ÙÙ‡Ù… Ø§Ù„Ù€ DocumentSummaryIndex</h4>
                        <p>Ø§Ù„Ù€ DocumentSummaryIndex Ù‡Ùˆ Ù†ÙˆØ¹ Ø®Ø§Øµ Ù…Ù† Ø§Ù„Ù€ indices ÙÙŠ LlamaIndex Ø¨ÙŠØ®Ù„ÙŠÙ†Ø§ Ù†Ø¹Ù…Ù„ Ù…Ù„Ø®ØµØ§Øª Ù„Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙˆÙ†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù….</p>
                    </div>

                    <div class="code-block">
from llama_index.core import DocumentSummaryIndex
from llama_index.core.schema import Document

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªÙ†Ø¯Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
documents = [
    Document(text="Ù‡Ø°Ø§ Ù…Ø³ØªÙ†Ø¯ Ø¹Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ..."),
    Document(text="Ù…Ø³ØªÙ†Ø¯ Ø¢Ø®Ø± Ø¹Ù† Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ..."),
]

# Ø¥Ù†Ø´Ø§Ø¡ DocumentSummaryIndex
index = DocumentSummaryIndex.from_documents(documents)

print("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ DocumentSummaryIndex Ø¨Ù†Ø¬Ø§Ø­!")
                    </div>

                    <div class="info-box">
                        <h4>ğŸ” Ø§Ù„Ù…ÙŠØ²Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h4>
                        <p>Ø§Ù„Ù€ DocumentSummaryIndex Ø¨ÙŠÙˆÙ„Ø¯ Ù…Ù„Ø®Øµ Ù„ÙƒÙ„ Ù…Ø³ØªÙ†Ø¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… LLMØŒ ÙˆØ¨Ø¹Ø¯ÙŠÙ† Ø¨ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù„Ø®ØµØ§Øª Ø¯ÙŠ Ù„Ù„Ø¨Ø­Ø« Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ù…Ø¨Ø§Ø´Ø±Ø©.</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>âš™ï¸ ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ DocumentSummaryIndex</h2>
                <div class="card-content">
                    <div class="technical-detail">
                        <h4>ğŸ”§ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©</h4>
                        <p>Ø§Ù„Ù€ DocumentSummaryIndex Ø¨ÙŠÙ…Ø± Ø¨Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
                        <ul>
                            <li>Ù‚Ø±Ø§Ø¡Ø© ÙƒÙ„ Ù…Ø³ØªÙ†Ø¯</li>
                            <li>ØªÙˆÙ„ÙŠØ¯ Ù…Ù„Ø®Øµ Ù„Ù„Ù…Ø³ØªÙ†Ø¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… LLM</li>
                            <li>Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø®Øµ Ù…Ø¹ Ø±Ø¨Ø·Ù‡ Ø¨Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø£ØµÙ„ÙŠ</li>
                            <li>Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù„Ø®ØµØ§Øª Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</li>
                        </ul>
                    </div>

                    <div class="code-block">
# Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø®ØµØµ
from llama_index.core import Settings
from llama_index.llms.openai import OpenAI

# ØªØ®ØµÙŠØµ Ø§Ù„Ù€ LLM Ù„Ù„ØªÙ„Ø®ÙŠØµ
Settings.llm = OpenAI(
    model="gpt-4",
    temperature=0.1,
    max_tokens=500
)

# template Ù…Ø®ØµØµ Ù„Ù„ØªÙ„Ø®ÙŠØµ
summary_template = """
Ø§ÙƒØªØ¨ Ù…Ù„Ø®Øµ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„ØªØ§Ù„ÙŠ:

{context_str}

Ø§Ù„Ù…Ù„Ø®Øµ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØ¶Ù…Ù†:
- Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
- Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©
"""

# Ø¥Ù†Ø´Ø§Ø¡ Index Ù…Ø¹ template Ù…Ø®ØµØµ
index = DocumentSummaryIndex.from_documents(
    documents,
    summary_template=summary_template,
    show_progress=True
)
                    </div>

                    <div class="warning-box">
                        <h4>âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©</h4>
                        <p>Ø¥Ù†Ø´Ø§Ø¡ DocumentSummaryIndex Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ ÙˆÙ‚Øª Ø£Ø·ÙˆÙ„ Ù…Ù† Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø®Ø±Ù‰ Ù„Ø£Ù†Ù‡ ÙŠØ­ØªØ§Ø¬ Ù„ØªÙˆÙ„ÙŠØ¯ Ù…Ù„Ø®ØµØ§Øª Ù„ÙƒÙ„ Ù…Ø³ØªÙ†Ø¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… LLM.</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸš€ Ø§Ø³ØªØ®Ø¯Ø§Ù… DocumentSummaryIndex Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</h2>
                <div class="card-content">
                    <div class="code-block">
# Ø¥Ù†Ø´Ø§Ø¡ query engine
query_engine = index.as_query_engine()

# Ø·Ø±Ø­ Ø§Ø³ØªØ¹Ù„Ø§Ù…
response = query_engine.query("Ù…Ø§ Ù‡ÙŠ Ø£Ù‡Ù… Ø§Ù„Ù†Ù‚Ø§Ø· Ø­ÙˆÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ")

print("Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©:", response.response)
print("Ø§Ù„Ù…ØµØ§Ø¯Ø±:", len(response.source_nodes))
                    </div>

                    <div class="code-block">
# Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…ØªÙ‚Ø¯Ù… Ù…Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
query_engine = index.as_query_engine(
    response_mode="tree_summarize",  # Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ„Ø®ÙŠØµ
    similarity_top_k=3,              # Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    verbose=True                     # Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
)

response = query_engine.query(
    "Ù‚Ø§Ø±Ù† Ø¨ÙŠÙ† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙˆØ§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ"
)

print(response.response)
                    </div>

                    <div class="technical-detail">
                        <h4>ğŸ›ï¸ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</h4>
                        <ul>
                            <li><strong>response_mode:</strong> ÙƒÙŠÙÙŠØ© Ø¯Ù…Ø¬ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ("tree_summarize", "compact", "simple_summarize")</li>
                            <li><strong>similarity_top_k:</strong> Ø¹Ø¯Ø¯ Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹</li>
                            <li><strong>verbose:</strong> Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ“Š Ù…Ù‚Ø§Ø±Ù†Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</h2>
                <div class="card-content">
                    <div class="code-block">
# Ù…Ù‚Ø§Ø±Ù†Ø© response modes Ù…Ø®ØªÙ„ÙØ©
query = "Ù…Ø§ Ù‡ÙŠ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ"

# Simple summarize
engine_simple = index.as_query_engine(response_mode="simple_summarize")
response_simple = engine_simple.query(query)

# Tree summarize  
engine_tree = index.as_query_engine(response_mode="tree_summarize")
response_tree = engine_tree.query(query)

# Compact
engine_compact = index.as_query_engine(response_mode="compact")
response_compact = engine_compact.query(query)

print("Simple:", response_simple.response[:200])
print("Tree:", response_tree.response[:200])
print("Compact:", response_compact.response[:200])
                    </div>

                    <div class="info-box">
                        <h4>ğŸ“‹ Ù…ØªÙ‰ ØªØ³ØªØ®Ø¯Ù… ÙƒÙ„ Ù†ÙˆØ¹ØŸ</h4>
                        <ul>
                            <li><strong>simple_summarize:</strong> Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø© ÙˆØ§Ù„Ø³Ø±ÙŠØ¹Ø©</li>
                            <li><strong>tree_summarize:</strong> Ù„Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙˆØ§Ù„Ù…Ø¹Ù‚Ø¯</li>
                            <li><strong>compact:</strong> Ù„Ù„ØªÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ’¾ Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ DocumentSummaryIndex</h2>
                <div class="card-content">
                    <div class="code-block">
# Ø­ÙØ¸ Ø§Ù„Ù€ index
index.storage_context.persist(persist_dir="./doc_summary_storage")

print("ØªÙ… Ø­ÙØ¸ DocumentSummaryIndex")
                    </div>

                    <div class="code-block">
# ØªØ­Ù…ÙŠÙ„ index Ù…Ø­ÙÙˆØ¸
from llama_index.core import StorageContext, load_index_from_storage

# ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
storage_context = StorageContext.from_defaults(
    persist_dir="./doc_summary_storage"
)

loaded_index = load_index_from_storage(storage_context)

# Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù€ index Ø§Ù„Ù…Ø­Ù…Ù„
loaded_query_engine = loaded_index.as_query_engine()
response = loaded_query_engine.query("Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ")

print("ØªÙ… ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù€ index Ø¨Ù†Ø¬Ø§Ø­")
                    </div>

                    <div class="highlight-box">
                        <h4>ğŸ’¡ ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø­ÙØ¸</h4>
                        <p>Ø­ÙØ¸ DocumentSummaryIndex Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ Ù„Ø£Ù† Ø¥Ù†Ø´Ø§Ø¡Ù‡ ÙŠØªØ·Ù„Ø¨ ÙˆÙ‚Øª ÙˆÙ…Ø§Ù„ (API calls Ù„Ù„ØªÙ„Ø®ÙŠØµ)ØŒ ÙØ§Ù„Ø­ÙØ¸ ÙŠÙˆÙØ± Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©.</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸª Ù…Ø«Ø§Ù„ Ø´Ø§Ù…Ù„ ÙˆØ¹Ù…Ù„ÙŠ</h2>
                <div class="card-content">
                    <div class="code-block">
import os
from llama_index.core import (
    DocumentSummaryIndex, 
    Settings,
    SimpleDirectoryReader,
    StorageContext,
    load_index_from_storage
)
from llama_index.llms.openai import OpenAI
from llama_index.embeddings.openai import OpenAIEmbedding

def create_document_summary_system():
    # Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø©
    os.environ["OPENAI_API_KEY"] = "your-api-key"
    
    Settings.llm = OpenAI(model="gpt-4o-mini", temperature=0.1)
    Settings.embed_model = OpenAIEmbedding(model="text-embedding-3-small")
    
    # ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
    documents = SimpleDirectoryReader("./data").load_data()
    print(f"ØªÙ… ØªØ­Ù…ÙŠÙ„ {len(documents)} Ù…Ø³ØªÙ†Ø¯")
    
    # template Ù…Ø®ØµØµ Ù„Ù„ØªÙ„Ø®ÙŠØµ
    arabic_summary_template = """
    Ù‚Ù… Ø¨ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø®Øµ Ø´Ø§Ù…Ù„ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„ØªØ§Ù„ÙŠ:
    
    Ø§Ù„Ù…Ø­ØªÙˆÙ‰: {context_str}
    
    Ø§Ù„Ù…Ù„Ø®Øµ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ´Ù…Ù„:
    1. Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    2. Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (3-5 Ù†Ù‚Ø§Ø·)
    3. Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬Ø§Øª Ø£Ùˆ Ø§Ù„ØªÙˆØµÙŠØ§Øª
    4. Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù‡Ù…Ø© Ø£Ø®Ø±Ù‰
    
    Ø§Ù„Ù…Ù„Ø®Øµ:
    """
    
    # Ø¥Ù†Ø´Ø§Ø¡ DocumentSummaryIndex
    try:
        # Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ index Ù…ÙˆØ¬ÙˆØ¯
        storage_context = StorageContext.from_defaults(
            persist_dir="./doc_summary_storage"
        )
        index = load_index_from_storage(storage_context)
        print("ØªÙ… ØªØ­Ù…ÙŠÙ„ DocumentSummaryIndex Ù…ÙˆØ¬ÙˆØ¯")
        
    except:
        # Ø¥Ù†Ø´Ø§Ø¡ index Ø¬Ø¯ÙŠØ¯
        print("Ø¥Ù†Ø´Ø§Ø¡ DocumentSummaryIndex Ø¬Ø¯ÙŠØ¯...")
        index = DocumentSummaryIndex.from_documents(
            documents,
            summary_template=arabic_summary_template,
            show_progress=True
        )
        
        # Ø­ÙØ¸ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ø§Ø­Ù‚Ø§Ù‹
        index.storage_context.persist(persist_dir="./doc_summary_storage")
        print("ØªÙ… Ø­ÙØ¸ DocumentSummaryIndex")
    
    return index

def interactive_query_system(index):
    # Ø¥Ø¹Ø¯Ø§Ø¯ query engine Ù…ØªÙ‚Ø¯Ù…
    query_engine = index.as_query_engine(
        response_mode="tree_summarize",
        similarity_top_k=3,
        verbose=False
    )
    
    print("\nğŸ¤– Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ")
    print("Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø£Ùˆ 'Ø®Ø±ÙˆØ¬' Ù„Ù„Ø¥Ù†Ù‡Ø§Ø¡")
    
    while True:
        question = input("\nâ“ Ø³Ø¤Ø§Ù„Ùƒ: ").strip()
        
        if question.lower() in ['Ø®Ø±ÙˆØ¬', 'exit', 'quit']:
            print("ğŸ‘‹ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…!")
            break
        
        if not question:
            continue
        
        try:
            print("ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...")
            response = query_engine.query(question)
            
            print(f"\nğŸ“ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©:\n{response.response}")
            
            if hasattr(response, 'source_nodes') and response.source_nodes:
                print(f"\nğŸ“š Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©: {len(response.source_nodes)}")
                
        except Exception as e:
            print(f"âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: {e}")

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
if __name__ == "__main__":
    index = create_document_summary_system()
    interactive_query_system(index)
                    </div>

                    <div class="technical-detail">
                        <h4>ğŸ¯ Ù…Ù…ÙŠØ²Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ù…Ø«Ø§Ù„</h4>
                        <ul>
                            <li>Ø¥Ø¹Ø¯Ø§Ø¯ Ø´Ø§Ù…Ù„ Ù„Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„Ù†Ù…Ø§Ø°Ø¬</li>
                            <li>template Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„ØªÙ„Ø®ÙŠØµ</li>
                            <li>Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ Ø°ÙƒÙŠ Ù„Ù„Ù€ index</li>
                            <li>Ù†Ø¸Ø§Ù… Ø§Ø³ØªØ¹Ù„Ø§Ù… ØªÙØ§Ø¹Ù„ÙŠ</li>
                            <li>Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ“‹ Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù‡Ù…Ø©</h2>
                <div class="card-content">
                    <div class="highlight-box">
                        <h4>âœ… Ù…Ø§ ØªØ¹Ù„Ù…Ù†Ø§Ù‡ Ø¹Ù† DocumentSummaryIndex</h4>
                        <ul>
                            <li>ÙƒÙŠÙÙŠØ© Ø¥Ù†Ø´Ø§Ø¡ DocumentSummaryIndex Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</li>
                            <li>ØªØ®ØµÙŠØµ templates Ø§Ù„ØªÙ„Ø®ÙŠØµ</li>
                            <li>Ø§Ø³ØªØ®Ø¯Ø§Ù… query engines Ù…Ø®ØªÙ„ÙØ©</li>
                            <li>Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ index</li>
                            <li>Ø¨Ù†Ø§Ø¡ Ù†Ø¸Ø§Ù… ØªÙØ§Ø¹Ù„ÙŠ ÙƒØ§Ù…Ù„</li>
                        </ul>
                    </div>

                    <div class="info-box">
                        <h4>ğŸ¯ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ù…Ø«Ù„</h4>
                        <ul>
                            <li>Ø§Ø³ØªØ®Ø¯Ù… templates Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø¬Ø§Ù„</li>
                            <li>Ø§Ø­ÙØ¸ Ø§Ù„Ù€ index Ù„ØªÙˆÙÙŠØ± Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù…Ø§Ù„</li>
                            <li>Ø§Ø®ØªØ± response_mode Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</li>
                            <li>Ø±Ø§Ù‚Ø¨ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ API Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ</li>
                        </ul>
                    </div>

                    <div class="warning-box">
                        <h4>âš ï¸ ØªØ°ÙƒØ± Ø¯Ø§Ø¦Ù…Ø§Ù‹</h4>
                        <p>DocumentSummaryIndex Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹ Ù„ÙƒÙ† ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§Ø±Ø¯ Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø®Ø±Ù‰. Ø§Ø³ØªØ®Ø¯Ù…Ù‡ Ø¹Ù†Ø¯Ù…Ø§ ØªÙƒÙˆÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„ÙÙ‡Ù… ÙˆØ§Ù„ØªÙ„Ø®ÙŠØµ Ø£Ù‡Ù… Ù…Ù† Ø§Ù„Ø³Ø±Ø¹Ø©.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>