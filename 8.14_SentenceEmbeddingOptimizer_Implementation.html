<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SentenceEmbeddingOptimizer - ุขููุฉ ุงูุนูู ุงูุชูุตูููุฉ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; line-height: 1.8; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); margin-bottom: 30px; text-align: center; }
        .card { background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); }
        .card h2 { color: #2c3e50; font-size: 1.8em; margin-bottom: 20px; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        .algorithm-flow { background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .step-detail { background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .code-card { background: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 15px; margin: 20px 0; direction: ltr; text-align: left; }
        .example-walkthrough { background: linear-gradient(120deg, #ffecd2 0%, #fcb69f 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .performance-analysis { background: linear-gradient(120deg, #ff9a9e 0%, #fecfef 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .context-demo { background: linear-gradient(120deg, #d299c2 0%, #fef9d7 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .footer { background: rgba(44, 62, 80, 0.9); color: white; text-align: center; padding: 20px; border-radius: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>๐ฌ SentenceEmbeddingOptimizer - ุขููุฉ ุงูุนูู ุงูุชูุตูููุฉ</h1>
            <p>ุงูุฏุฑุณ ุงูุฑุงุจุน ุนุดุฑ: ููู ูู ุฎุทูุฉ ูู ุงูุนูููุฉ ุชุญุช ุงูุบุทุงุก</p>
        </div>

        <div class="card">
            <h2>๐ ุงูุฎุทูุงุช ุงูุชูุตูููุฉ ููุฎูุงุฑุฒููุฉ</h2>
            <div class="algorithm-flow">
                <h3>๐ ุงูู Pipeline ุงููุงูู:</h3>
                <ol>
                    <li><strong>ุงุณุชุฎุฑุงุฌ ุงููุญุชูู:</strong> ุฃุฎุฐ ุงููุต ูู ูู node</li>
                    <li><strong>ุงูุชูุณูู:</strong> ุชูุณูู ุงููุต ูุฌูู ุจุงุณุชุฎุฏุงู tokenizer</li>
                    <li><strong>ุฅูุดุงุก embeddings ููู query:</strong> ุชุญููู ุงูุณุคุงู ูู vector</li>
                    <li><strong>ุฅูุดุงุก embeddings ููุฌูู:</strong> ุชุญููู ูู ุฌููุฉ ูู vector</li>
                    <li><strong>ุญุณุงุจ ุงูููุงุฑูุงุช:</strong> similarity ุจูู query ููู ุฌููุฉ</li>
                    <li><strong>ุงูุชุฑุชูุจ:</strong> ุชุฑุชูุจ ุงูุฌูู ุญุณุจ similarity</li>
                    <li><strong>ุงูููุชุฑุฉ:</strong> ุชุทุจูู percentile ุฃู threshold cutoff</li>
                    <li><strong>ุฅุถุงูุฉ ุงูุณูุงู:</strong> ุฃุฎุฐ ุงูุฌูู ุงููุฌุงูุฑุฉ</li>
                    <li><strong>ุฅุนุงุฏุฉ ุงูุชุฌููุน:</strong> ุชุฌููุน ุงูุฌูู ุงููุฎุชุงุฑุฉ</li>
                    <li><strong>ุงูุฅุฑุฌุงุน:</strong> ุฅุฑุฌุงุน ุงูููุฏ ุงููุญุณู</li>
                </ol>
            </div>
        </div>

        <div class="card">
            <h2>๐ง Step 1-2: ุงุณุชุฎุฑุงุฌ ูุชูุณูู ุงููุต</h2>
            <div class="step-detail">
                <h3>๐ ุงุณุชุฎุฑุงุฌ ุงููุญุชูู:</h3>
                <p>ุงููุธุงู ุจูุงุฎุฏ ุงููุต ูู ูู node ูู ุงููุงุฆูุฉ. ุฏู ูุฏ ูููู node.text ุฃู node.content ุญุณุจ ููุน ุงูููุฏ.</p>
                
                <h3>โ๏ธ ุงูุชูุณูู ุจุงูู Tokenizer:</h3>
                <p>ุจูุณุชุฎุฏู punkt sentence tokenizer ุนุดุงู ููุณู ุงููุต ูุฌูู. ุฏู ูุด ุจุณูุท ุฒู split('.') ููู ุฐูู ุฌุฏุงู:</p>
                
                <h4>๐ฏ ูุซุงู ุนูู ุงูุฐูุงุก:</h4>
                <ul>
                    <li><strong>ุงููุต:</strong> "Dr. Ahmed works at Cairo University. He specializes in AI."</li>
                    <li><strong>ุชูุณูู ุณูุก:</strong> ["Dr", " Ahmed works at Cairo University", " He specializes in AI", ""]</li>
                    <li><strong>ุชูุณูู punkt:</strong> ["Dr. Ahmed works at Cairo University.", "He specializes in AI."]</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>๐ข Step 3-4: ุฅูุดุงุก Embeddings</h2>
            <div class="step-detail">
                <h3>๐ฏ Query Embedding:</h3>
                <p>ุฃูู ุญุงุฌุฉุ ุงูุณุคุงู ููุณู ุจูุชุญูู ูู embedding vector. ุฏู ุจูุญุตู ูุฑุฉ ูุงุญุฏุฉ ุจุณ ููู query.</p>
                
                <h3>๐ Sentence Embeddings:</h3>
                <p>ูู ุฌููุฉ ูู ุงูููุฏ ุจุชุชุญูู ูู embedding vector ูููุตู. ูู ุนูุฏู 10 ุฌููุ ููุจูู ุนูุฏู 10 vectors.</p>
                
                <h3>๐ ูุซุงู ุชูุถูุญู:</h3>
                <ul>
                    <li><strong>Query:</strong> "ูุง ูู ููุงุฆุฏ AIุ" โ [0.1, 0.8, 0.3, ...] (512 dimensions)</li>
                    <li><strong>Sentence 1:</strong> "AI ูุญุณู ุงูุชุดุฎูุต" โ [0.2, 0.7, 0.4, ...]</li>
                    <li><strong>Sentence 2:</strong> "ุงูุทูุณ ุฌููู ุงูููู" โ [0.9, 0.1, 0.2, ...]</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>โ๏ธ Step 5: ุญุณุงุจ Similarity Scores</h2>
            <div name="example-walkthrough">
                <h3>๐งฎ ุงูุญุณุงุจ ุงูุฑูุงุถู:</h3>
                <p>ุงููุธุงู ุจูุญุณุจ cosine similarity ุจูู query vector ููู sentence vector.</p>
                
                <div class="code-card">
                    <h4>Cosine Similarity Formula:</h4>
                    <pre><code>similarity = (query_vector ยท sentence_vector) / 
             (||query_vector|| ร ||sentence_vector||)

# Result is between -1 and 1, but usually 0 to 1 for text</code></pre>
                </div>
                
                <h3>๐ ูุชุงุฆุฌ ุงููุซุงู:</h3>
                <ul>
                    <li><strong>Query vs "AI ูุญุณู ุงูุชุดุฎูุต":</strong> 0.87 (similarity ุนุงูู)</li>
                    <li><strong>Query vs "ุงูุทูุณ ุฌููู ุงูููู":</strong> 0.12 (similarity ุถุนูู)</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>๐ Step 6-7: ุงูุชุฑุชูุจ ูุงูููุชุฑุฉ</h2>
            <div class="algorithm-flow">
                <h3>๐ ุงูุชุฑุชูุจ:</h3>
                <p>ูู ุงูุฌูู ุจุชุชืจุชุจ ูู ุงูุฃุนูู ููุฃูู similarity score.</p>
                
                <h3>โ๏ธ ุชุทุจูู Cutoffs:</h3>
                <h4>๐ ูู percentile_cutoff = 0.5:</h4>
                <ul>
                    <li>ุนุฏุฏ ุงูุฌูู ุงููุทููุจ = int(10 ร 0.5) = 5 ุฌูู</li>
                    <li>ูุงุฎุฏ ุฃุนูู 5 ุฌูู</li>
                </ul>
                
                <h4>๐ฏ ูู threshold_cutoff = 0.6:</h4>
                <ul>
                    <li>ูุงุฎุฏ ุจุณ ุงูุฌูู ุงููู similarity > 0.6</li>
                    <li>ูู 3 ุฌูู ุจุณ ููู 0.6ุ ููุงุฎุฏ 3 ุจุณ</li>
                </ul>
                
                <h4>๐ ูู ุงูุงุชููู ูุน ุจุนุถ:</h4>
                <p>ูุงุฎุฏ ุฃุนูู 5 ุฌููุ ููู ุจุณ ุงููู similarity > 0.6</p>
            </div>
        </div>

        <div class="card">
            <h2>๐ Step 8: ุฅุถุงูุฉ ุงูุณูุงู</h2>
            <div class="context-demo">
                <h3>๐ฏ Context Before/After:</h3>
                <p>ูู ุงุฎุชุงุฑ ุฌููุฉ ูุนููุฉุ ูููู ูุงุฎุฏ ุฌูู ูุจููุง ูุจุนุฏูุง ุนุดุงู ุงูุณูุงู.</p>
                
                <h3>๐ ูุซุงู ุชุทุจููู:</h3>
                <p><strong>ุงูุฌูู ุงูุฃุตููุฉ:</strong></p>
                <ol>
                    <li>"ุงูุชูููููุฌูุง ุชุชุทูุฑ ุณุฑูุนุงู" (similarity: 0.4)</li>
                    <li>"ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูููุฏ ูู ุงูุทุจ" (similarity: 0.9) โ ูุฎุชุงุฑุฉ</li>
                    <li>"ูุณุงุนุฏ ูู ุงูุชุดุฎูุต ุงููุจูุฑ" (similarity: 0.5)</li>
                </ol>
                
                <p><strong>ูุน context_before=1, context_after=1:</strong></p>
                <p>ููุงุฎุฏ ุงูุฌููุฉ ุงููุฎุชุงุฑุฉ + ุงูุฌููุฉ ูุจููุง + ุงูุฌููุฉ ุจุนุฏูุง = 3 ุฌูู ูุชุฑุงุจุทุฉ</p>
            </div>
        </div>

        <div class="card">
            <h2>๐ง Step 9-10: ุงูุชุฌููุน ูุงูุฅุฑุฌุงุน</h2>
            <div class="step-detail">
                <h3>๐ ุฅุนุงุฏุฉ ุงูุชุฌููุน:</h3>
                <p>ูู ุงูุฌูู ุงููุฎุชุงุฑุฉ ุจุชุชุฌูุน ูู ูุต ูุงุญุฏ ูุชุฑุงุจุท. ุงููุธุงู ุจูุญุงูุธ ุนูู ุงูุชุฑุชูุจ ุงูุฃุตูู ููุฌูู.</p>
                
                <h3>โจ ุงูุฅุฑุฌุงุน:</h3>
                <p>ุงูููุฏ ุงูุฌุฏูุฏ ุจูุจูู ููู ุงููุต ุงููุญุณู ุจุฏูุงู ูู ุงููุต ุงูุฃุตููุ ูููุณ ุงูู metadata ูุงูู score.</p>
                
                <h3>๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:</h3>
                <ul>
                    <li><strong>ููุฏ ุฃูุตุฑ:</strong> ุฃูู tokens</li>
                    <li><strong>ูุญุชูู ูุฑูุฒ:</strong> ูู ุงูุฌูู ูููุฏุฉ</li>
                    <li><strong>ุณูุงู ูุญููุธ:</strong> ุงูุฌูู ูุชุฑุงุจุทุฉ</li>
                    <li><strong>ุฌูุฏุฉ ุนุงููุฉ:</strong> similarity scores ุนุงููุฉ</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>โก ุชุญููู ุงูุฃุฏุงุก</h2>
            <div class="performance-analysis">
                <h3>๐ ุงูุชุนููุฏ ุงูุญุงุณูุจู:</h3>
                <ul>
                    <li><strong>Tokenization:</strong> O(n) ุญูุซ n = ุทูู ุงููุต</li>
                    <li><strong>Embedding Generation:</strong> O(s ร e) ุญูุซ s = ุนุฏุฏ ุงูุฌููุ e = ููุช ุงูู embedding</li>
                    <li><strong>Similarity Calculation:</strong> O(s ร d) ุญูุซ d = embedding dimension</li>
                    <li><strong>Sorting:</strong> O(s log s)</li>
                </ul>
                
                <h3>๐พ ุงุณุชููุงู ุงูุฐุงูุฑุฉ:</h3>
                <ul>
                    <li>ุชุฎุฒูู embeddings ููู ุงูุฌูู</li>
                    <li>ูุคูุช ููู ูุฏ ูููู ูุจูุฑ ูููุตูุต ุงูุทูููุฉ</li>
                    <li>ูููู ุชุญุณููู ุจู batch processing</li>
                </ul>
                
                <h3>โ๏ธ ุงูุชูุงุฒู:</h3>
                <p>ุงููููุฉ ุงูุญุงุณูุจูุฉ ุนุงููุฉ ุดููุฉุ ููู ุงููุงุฆุฏุฉ ูู ุฌูุฏุฉ ุงููุชุงุฆุฌ ุชุณุชุงูู.</p>
            </div>
        </div>

        <div class="card">
            <h2>๐ป ูุซุงู ุดุงูู ููุชูููุฐ</h2>
            <div class="code-card">
                <h3>Complete Implementation Example:</h3>
                <pre><code>from llama_index.core.postprocessor import SentenceEmbeddingOptimizer

# Create optimizer
optimizer = SentenceEmbeddingOptimizer(
    percentile_cutoff=0.6,
    threshold_cutoff=0.5,
    context_before=1,
    context_after=1
)

# Use with query engine
query_engine = index.as_query_engine(
    node_postprocessors=[optimizer]
)

# Query will now get optimized context
response = query_engine.query("What are the benefits of AI in medicine?")</code></pre>
            </div>
        </div>

        <div class="footer">
            <p>๐ฌ ุงูุชูู ุงูุฌุฒุก ุงูุฑุงุจุน ุนุดุฑ | ุงูุฌุฒุก ุงูุชุงูู: ูููุฏ ุงูุงุณุชุฎุฏุงู ูุงูุญุงูุงุช ุงูุฎุงุตุฉ</p>
        </div>
    </div>
</body>
</html>