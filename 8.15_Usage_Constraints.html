<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚ÙŠÙˆØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ©</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; line-height: 1.8; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); margin-bottom: 30px; text-align: center; }
        .card { background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); }
        .card h2 { color: #2c3e50; font-size: 1.8em; margin-bottom: 20px; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        .warning-box { background: linear-gradient(120deg, #ff9a9e 0%, #fecfef 100%); padding: 20px; border-radius: 15px; margin: 20px 0; border-right: 5px solid #e74c3c; }
        .important-note { background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .code-example { background: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 15px; margin: 20px 0; direction: ltr; text-align: left; }
        .architecture-explanation { background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .manual-setup { background: linear-gradient(120deg, #ffecd2 0%, #fcb69f 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .separation-principle { background: linear-gradient(120deg, #d299c2 0%, #fef9d7 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .footer { background: rgba(44, 62, 80, 0.9); color: white; text-align: center; padding: 20px; border-radius: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš ï¸ Ù‚ÙŠÙˆØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ©</h1>
            <p>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø®Ø§Ù…Ø³ Ø¹Ø´Ø±: ÙÙ‡Ù… Ø­Ø¯ÙˆØ¯ Node Postprocessors ÙˆÙ…ØªÙ‰ Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§</p>
        </div>

        <div class="card">
            <h2>ğŸš« Ø§Ù„Ù‚ÙŠØ¯ Ø§Ù„Ø£Ù‡Ù…: Ù…Ø´ ÙÙŠ as_retriever!</h2>
            <div class="warning-box">
                <h3>âš¡ ØªØ­Ø°ÙŠØ± Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹:</h3>
                <p>Node postprocessors <strong>Ù…Ø§ÙŠØªØ³ØªØ®Ø¯Ù…ÙˆØ´</strong> ÙÙŠ Ø§Ù„Ù€ as_retriever() method! Ø¯ÙŠ Ù†Ù‚Ø·Ø© Ù…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹ ÙƒØªÙŠØ± developers Ø¨ÙŠÙ‚Ø¹ÙˆØ§ ÙÙŠÙ‡Ø§.</p>
                
                <h3>âŒ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø®Ø·Ø£:</h3>
                <div class="code-example">
                    <pre><code># âŒ This is WRONG!
retriever = index.as_retriever(
    node_postprocessors=[some_postprocessor]  # This won't work!
)</code></pre>
                </div>
                
                <h3>âœ… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</h3>
                <div class="code-example">
                    <pre><code># âœ… This is CORRECT!
query_engine = index.as_query_engine(
    node_postprocessors=[some_postprocessor]  # This works!
)</code></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ—ï¸ ÙÙ‡Ù… Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©</h2>
            <div class="architecture-explanation">
                <h3>ğŸ” Ù„ÙŠÙ‡ Ø§Ù„Ù‚ÙŠØ¯ Ø¯Ù‡ Ù…ÙˆØ¬ÙˆØ¯ØŸ</h3>
                <p>Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ ÙƒÙ„Ù‡ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù€ separation of concerns ÙÙŠ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©:</p>
                
                <h4>ğŸ“‹ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª Ø§Ù„Ù€ Retriever:</h4>
                <ul>
                    <li><strong>Ø§Ù„Ø¨Ø­Ø«:</strong> ÙŠØ¯ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙƒØªØ± Ø§Ù„Ù†ÙˆØ¯Ø² similarity Ù„Ù„Ù€ query</li>
                    <li><strong>Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹:</strong> ÙŠØ¬ÙŠØ¨ Ø§Ù„Ù†ÙˆØ¯Ø² Ù…Ù† Ø§Ù„Ù€ vector store</li>
                    <li><strong>Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙŠ:</strong> ØªØ±ØªÙŠØ¨ Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ similarity</li>
                </ul>
                
                <h4>âš™ï¸ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª Ø§Ù„Ù€ Query Engine:</h4>
                <ul>
                    <li><strong>Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù†ÙˆØ¯Ø²:</strong> Ù…Ù† Ø§Ù„Ù€ retriever</li>
                    <li><strong>Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©:</strong> ØªØ·Ø¨ÙŠÙ‚ postprocessors</li>
                    <li><strong>Ø§Ù„ØªØ¬Ù…ÙŠØ¹:</strong> ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù†ÙˆØ¯Ø² Ù„Ù„Ù€ LLM</li>
                    <li><strong>Ø§Ù„ØªÙˆÙ„ÙŠØ¯:</strong> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ”„ Ø§Ù„Ù†Ù…Ø· Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h2>
            <div class="separation-principle">
                <h3>ğŸ“Š ØªØ³Ù„Ø³Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØµØ­ÙŠØ­:</h3>
                <ol>
                    <li><strong>Query Input:</strong> Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ³Ø£Ù„ Ø³Ø¤Ø§Ù„</li>
                    <li><strong>Retrieval:</strong> Ø§Ù„Ù€ retriever ÙŠØ¬ÙŠØ¨ Ù†ÙˆØ¯Ø² Ù…Ù† Ø§Ù„Ù€ index</li>
                    <li><strong>Post-processing:</strong> Ø§Ù„Ù†ÙˆØ¯Ø² ØªØªØ¹Ø¯Ù„/ØªØªÙÙ„ØªØ±</li>
                    <li><strong>Response Synthesis:</strong> Ø§Ù„Ù†ÙˆØ¯Ø² ØªØªØ¯ÙŠ Ù„Ù„Ù€ LLM</li>
                    <li><strong>Final Answer:</strong> Ø§Ù„Ù€ LLM ÙŠÙˆÙ„Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</li>
                </ol>
                
                <h3>ğŸ¯ Ù„ÙŠÙ‡ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¯Ù‡ Ù…Ù†Ø·Ù‚ÙŠØŸ</h3>
                <ul>
                    <li><strong>Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø£ÙˆÙ„:</strong> Ù†Ø¬ÙŠØ¨ ÙƒÙ„ Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ† Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</li>
                    <li><strong>Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø¨Ø¹Ø¯ÙŠÙ†:</strong> Ù†Ø­Ø³Ù† ÙˆÙ†ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©</li>
                    <li><strong>Ø§Ù„ØªØ®ØµØµ:</strong> ÙƒÙ„ Ù…Ø±Ø­Ù„Ø© ØªØ±ÙƒØ² Ø¹Ù„Ù‰ ÙˆØ¸ÙŠÙØªÙ‡Ø§</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ› ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ù„Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©</h2>
            <div class="manual-setup">
                <h3>ğŸ”§ Ù…ØªÙ‰ Ù†Ø­ØªØ§Ø¬ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙŠØ¯ÙˆÙŠØŸ</h3>
                <p>Ø£ÙˆÙ‚Ø§Øª Ù†Ø­ØªØ§Ø¬ ØªØ­ÙƒÙ… Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„Ù€ pipelineØŒ ÙÙ†Ø¹Ù…Ù„ Ø§Ù„Ù€ setup Ø¨Ø¥ÙŠØ¯Ù†Ø§:</p>
                
                <div class="code-example">
                    <h4>Manual Setup Example:</h4>
                    <pre><code># Step 1: Create retriever manually
retriever = VectorIndexRetriever(
    index=index,
    similarity_top_k=10
)

# Step 2: Create postprocessors
similarity_filter = SimilarityPostprocessor(similarity_cutoff=0.7)
keyword_filter = KeywordNodePostprocessor(
    required_keywords=["AI", "machine learning"]
)

# Step 3: Create query engine manually
query_engine = RetrieverQueryEngine(
    retriever=retriever,
    node_postprocessors=[similarity_filter, keyword_filter]
)

# Step 4: Use normally
response = query_engine.query("Your question here")</code></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ¯ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©</h2>
            <div class="important-note">
                <h3>ğŸ”„ Multiple Postprocessors:</h3>
                <p>Ù…Ù…ÙƒÙ† ØªØ³ØªØ®Ø¯Ù… Ø£ÙƒØªØ± Ù…Ù† postprocessor Ù…Ø¹ Ø¨Ø¹Ø¶ØŒ ÙˆÙ‡ÙŠØªØ·Ø¨Ù‚ÙˆØ§ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨:</p>
                
                <div class="code-example">
                    <pre><code># Multiple postprocessors applied in order
query_engine = index.as_query_engine(
    node_postprocessors=[
        SimilarityPostprocessor(similarity_cutoff=0.6),  # First
        KeywordNodePostprocessor(required_keywords=["AI"]),  # Second
        LongContextReorder(),  # Third
        SentenceEmbeddingOptimizer(percentile_cutoff=0.5)  # Fourth
    ]
)</code></pre>
                </div>
                
                <h3>âš ï¸ ØªØ±ØªÙŠØ¨ Ù…Ù‡Ù…:</h3>
                <ul>
                    <li>ÙƒÙ„ postprocessor Ø¨ÙŠØ´ØªØºÙ„ Ø¹Ù„Ù‰ output Ø§Ù„Ù„ÙŠ Ù‚Ø¨Ù„Ù‡</li>
                    <li>Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨ÙŠØ£Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</li>
                    <li>ÙÙƒØ± ÙƒÙˆÙŠØ³ ÙÙŠ Ø§Ù„ØªØ³Ù„Ø³Ù„ Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ® Ø£Ù…Ø«Ù„Ø© Ù„Ù„Ù€ Pipeline Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h2>
            <div class="manual-setup">
                <h3>ğŸ“š Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ:</h3>
                <div class="code-example">
                    <pre><code># Academic research pipeline
academic_pipeline = [
    KeywordNodePostprocessor(
        required_keywords=["research", "study", "analysis"],
        exclude_keywords=["opinion", "blog"]
    ),
    SimilarityPostprocessor(similarity_cutoff=0.75),
    SentenceEmbeddingOptimizer(
        percentile_cutoff=0.4,
        threshold_cutoff=0.7
    ),
    LongContextReorder()
]

query_engine = index.as_query_engine(
    node_postprocessors=academic_pipeline
)</code></pre>
                </div>
                
                <h3>ğŸ¥ Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©:</h3>
                <div class="code-example">
                    <pre><code># Medical query pipeline
medical_pipeline = [
    KeywordNodePostprocessor(
        required_keywords=["medical", "clinical", "patient"],
        exclude_keywords=["alternative", "unproven"]
    ),
    SimilarityPostprocessor(similarity_cutoff=0.8),  # High precision
    MetadataReplacementPostprocessor(
        target_metadata_key="clinical_context"
    )
]

medical_engine = index.as_query_engine(
    node_postprocessors=medical_pipeline
)</code></pre>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>âš¡ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø£Ù…Ø«Ù„</h2>
            <div class="architecture-explanation">
                <h3>ğŸš€ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡:</h3>
                <ul>
                    <li><strong>ØªØ±ØªÙŠØ¨ Ø§Ù„ÙÙ„Ø§ØªØ±:</strong> Ø­Ø· Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ø§Ù„Ø£ÙˆÙ„ (Similarity Ù‚Ø¨Ù„ SentenceEmbedding)</li>
                    <li><strong>ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù†ÙˆØ¯Ø²:</strong> Ø§Ø³ØªØ®Ø¯Ù… similarity filter Ø£ÙˆÙ„Ø§Ù‹ Ø¹Ø´Ø§Ù† ØªÙ‚Ù„Ù„ Ø§Ù„Ø¹Ø¯Ø¯</li>
                    <li><strong>Batch Processing:</strong> Ù„Ù„Ù†ÙˆØ¯Ø² Ø§Ù„ÙƒØªÙŠØ±Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ù… batching</li>
                    <li><strong>Cache Embeddings:</strong> Ù„Ùˆ Ø¨ØªÙƒØ±Ø± Ù†ÙØ³ Ø§Ù„Ù€ queries</li>
                </ul>
                
                <h3>ğŸ’¾ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©:</h3>
                <ul>
                    <li>SentenceEmbeddingOptimizer Ø¨ÙŠØ³ØªÙ‡Ù„Ùƒ Ø°Ø§ÙƒØ±Ø© ÙƒØªÙŠØ±Ø©</li>
                    <li>Ø§Ø³ØªØ®Ø¯Ù…Ù‡ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø¨Ø¹Ø¯ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù†ÙˆØ¯Ø²</li>
                    <li>Ø±Ø§Ù‚Ø¨ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ù€ GPU memory Ù…Ø¹ embedding models</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
            <div class="important-note">
                <h3>âœ… Ø§Ø¹Ù…Ù„ ÙƒØ¯Ù‡:</h3>
                <ul>
                    <li>Ø§Ø³ØªØ®Ø¯Ù… postprocessors ÙÙŠ query engines Ø¨Ø³</li>
                    <li>Ø±ØªØ¨ Ø§Ù„Ù€ pipeline Ø¨Ù…Ù†Ø·Ù‚ (Ø³Ø±ÙŠØ¹ â†’ Ø¨Ø·ÙŠØ¡)</li>
                    <li>Ø§Ø®ØªØ¨Ø± ÙƒÙ„ postprocessor Ù„ÙˆØ­Ø¯Ù‡ Ø§Ù„Ø£ÙˆÙ„</li>
                    <li>Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªÙƒÙ„ÙØ©</li>
                </ul>
                
                <h3>âŒ Ù…ØªØ¹Ù…Ù„Ø´ ÙƒØ¯Ù‡:</h3>
                <ul>
                    <li>ØªØ­Ø· postprocessors ÙÙŠ as_retriever</li>
                    <li>ØªØ³ØªØ®Ø¯Ù… postprocessors ÙƒØªÙŠØ±Ø© Ø¨Ù„Ø§ Ø¯Ø§Ø¹ÙŠ</li>
                    <li>ØªÙ‡Ù…Ù„ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù€ pipeline</li>
                    <li>ØªØ®ØªØ¨Ø±Ø´ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©</li>
                </ul>
                
                <h3>ğŸŒŸ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</h3>
                <p>ØªØ¯ÙŠÙ„Ù„Ù€ LLM Ø£ÙØ¶Ù„ context Ù…Ù…ÙƒÙ† Ø¨Ø£Ù‚Ù„ ØªÙƒÙ„ÙØ© ÙˆØ£Ø¹Ù„Ù‰ ÙƒÙØ§Ø¡Ø©!</p>
            </div>
        </div>

        <div class="footer">
            <p>âš ï¸ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³ Ø¹Ø´Ø± | Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ§Ù„ÙŠ: Ø§Ù„Ø®Ù„Ø§ØµØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª</p>
        </div>
    </div>
</body>
</html>