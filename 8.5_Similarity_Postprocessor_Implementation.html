<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Similarity Postprocessor - Ø§Ù„ØªÙ†ÙÙŠØ° ÙˆØ§Ù„Ø¢Ù„ÙŠØ©</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; line-height: 1.8; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); margin-bottom: 30px; text-align: center; }
        .card { background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); }
        .card h2 { color: #2c3e50; font-size: 1.8em; margin-bottom: 20px; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        .algorithm-box { background: linear-gradient(120deg, #ff9a9e 0%, #fecfef 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .step-by-step { background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .code-card { background: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 15px; margin: 20px 0; direction: ltr; text-align: left; }
        .flowchart { background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .decision-tree { background: linear-gradient(120deg, #ffecd2 0%, #fcb69f 100%); padding: 20px; border-radius: 15px; margin: 20px 0; }
        .footer { background: rgba(44, 62, 80, 0.9); color: white; text-align: center; padding: 20px; border-radius: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš™ï¸ Similarity Postprocessor - Ø§Ù„ØªÙ†ÙÙŠØ° ÙˆØ§Ù„Ø¢Ù„ÙŠØ©</h1>
            <p>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø®Ø§Ù…Ø³: ÙÙ‡Ù… Ø¥Ø²Ø§ÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø¨ÙŠØ´ØªØºÙ„ ØªØ­Øª Ø§Ù„ØºØ·Ø§Ø¡</p>
        </div>

        <div class="card">
            <h2>ğŸ” Ø¥ÙŠÙ‡ Ø§Ù„Ù„ÙŠ Ø¨ÙŠØ­ØµÙ„ "Under the Hood"ØŸ</h2>
            <div class="algorithm-box">
                <p>Ø®Ù„ÙŠÙ†Ø§ Ù†Ø´ÙˆÙ Ø¥Ø²Ø§ÙŠ Ø§Ù„Ù€ Similarity Postprocessor Ø¨ÙŠØ´ØªØºÙ„ Ù…Ù† Ø¬ÙˆØ§ØŒ step by step:</p>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“‹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©</h2>
            <div class="step-by-step">
                <h3>ğŸ¯ Step 1: ÙØ­Øµ Ø§Ù„Ù€ similarity_cutoff</h3>
                <p>Ø£ÙˆÙ„ Ø­Ø§Ø¬Ø©ØŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨ÙŠØ´ÙˆÙ Ø¥Ù†Øª Ø­Ø¯Ø¯Øª similarity_cutoff ÙˆÙ„Ø§ Ù„Ø£. Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù‡ÙŠ None.</p>
                
                <h3>ğŸ”„ Step 2: Ø§Ù„ØªÙƒØ±Ø§Ø± Ø¹Ù„Ù‰ ÙƒÙ„ node</h3>
                <p>Ø¨ÙŠÙ…Ø± Ø¹Ù„Ù‰ ÙƒÙ„ node ÙÙŠ Ø§Ù„Ù€ input list ÙˆØ§Ø­Ø¯ ÙˆØ§Ø­Ø¯.</p>
                
                <h3>âš–ï¸ Step 3: Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù€ score</h3>
                <p>Ù„ÙƒÙ„ nodeØŒ Ø¨ÙŠØ´ÙˆÙ Ø§Ù„Ù€ similarity score Ø¨ØªØ§Ø¹Ù‡ ÙˆÙŠÙ‚Ø§Ø±Ù†Ù‡ Ø¨Ø§Ù„Ù€ cutoff.</p>
                
                <h3>âœ…âŒ Step 4: Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±</h3>
                <p>Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©ØŒ Ø¨ÙŠÙ‚Ø±Ø± ÙŠØ®Ù„ÙŠ Ø§Ù„Ù€ node Ø£Ùˆ ÙŠØ´ÙŠÙ„Ù‡.</p>
                
                <h3>ğŸ“¤ Step 5: Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø©</h3>
                <p>ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©ØŒ Ø¨ÙŠØ±Ø¬Ø¹ Ù‚Ø§Ø¦Ù…Ø© Ù…ÙÙ„ØªØ±Ø© Ù…Ù† NodeWithScore objects.</p>
            </div>
        </div>

        <div class="card">
            <h2>ğŸŒŠ Flow Chart Ù„Ù„Ø¹Ù…Ù„ÙŠØ©</h2>
            <div class="flowchart">
                <div style="text-align: center; font-family: monospace;">
                    <p>ğŸ“¥ Input: List of NodeWithScore</p>
                    <p>â¬‡ï¸</p>
                    <p>ğŸ” Check: similarity_cutoff set?</p>
                    <p>â¬‡ï¸</p>
                    <p>ğŸ”„ For each node in list:</p>
                    <p>â¬‡ï¸</p>
                    <p>âš–ï¸ Compare node.score with cutoff</p>
                    <p>â¬‡ï¸</p>
                    <p>âœ… Include if score â‰¥ cutoff</p>
                    <p>âŒ Exclude if score < cutoff</p>
                    <p>â¬‡ï¸</p>
                    <p>ğŸ“¤ Output: Filtered NodeWithScore list</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ¤– Ø´Ø¬Ø±Ø© Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª</h2>
            <div class="decision-tree">
                <h3>ğŸ“Š Decision Logic:</h3>
                <ul>
                    <li><strong>Ø¥Ø°Ø§ similarity_cutoff = None:</strong>
                        <ul>
                            <li>âœ… ÙƒÙ„ Ø§Ù„Ù†ÙˆØ¯Ø² Ø¨ØªÙØ¶Ù„ (Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙ„ØªØ±Ø©)</li>
                        </ul>
                    </li>
                    <li><strong>Ø¥Ø°Ø§ node.score = None:</strong>
                        <ul>
                            <li>âŒ Ø§Ù„Ù†ÙˆØ¯ Ø¯Ù‡ Ø¨ÙŠØªØ´Ø§Ù„ (Ù„Ø£Ù† Ù…Ø§ÙÙŠØ´ score)</li>
                        </ul>
                    </li>
                    <li><strong>Ø¥Ø°Ø§ node.score < cutoff:</strong>
                        <ul>
                            <li>âŒ Ø§Ù„Ù†ÙˆØ¯ Ø¯Ù‡ Ø¨ÙŠØªØ´Ø§Ù„ (score Ø¶Ø¹ÙŠÙ)</li>
                        </ul>
                    </li>
                    <li><strong>Ø¥Ø°Ø§ node.score â‰¥ cutoff:</strong>
                        <ul>
                            <li>âœ… Ø§Ù„Ù†ÙˆØ¯ Ø¯Ù‡ Ø¨ÙŠÙØ¶Ù„ (score ÙƒÙˆÙŠØ³)</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ’» Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</h2>
            <div class="code-card">
                <h3>How to instantiate:</h3>
                <pre><code>from llama_index.core.postprocessor import SimilarityPostprocessor

# Create with specific cutoff
similarity_postprocessor = SimilarityPostprocessor(
    similarity_cutoff=0.7
)

# Or create without cutoff (no filtering)
no_filter_postprocessor = SimilarityPostprocessor()

# Use with query engine
query_engine = index.as_query_engine(
    node_postprocessors=[similarity_postprocessor]
)</code></pre>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ§  ÙÙ‡Ù… Ø§Ù„Ù€ NodeWithScore Objects</h2>
            <div class="algorithm-box">
                <h3>ğŸ” Ø¥ÙŠÙ‡ Ù‡Ùˆ NodeWithScoreØŸ</h3>
                <p>Ø¯Ù‡ object Ø¨ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:</p>
                <ul>
                    <li><strong>node:</strong> Ø§Ù„Ù†ÙˆØ¯ Ø§Ù„Ù„ÙŠ ÙÙŠÙ‡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (text, metadata, etc.)</li>
                    <li><strong>score:</strong> Ø§Ù„Ù€ similarity score Ù…Ø¹ Ø§Ù„Ù€ query</li>
                </ul>
                
                <h3>ğŸ¯ Ù„ÙŠÙ‡ Ø¨ÙŠØ±Ø¬Ø¹ Ù†ÙØ³ Ø§Ù„Ù€ typeØŸ</h3>
                <p>Ø¹Ø´Ø§Ù† ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ù€ consistency ÙÙŠ Ø§Ù„Ù€ pipeline. ÙƒÙ„ Ù…Ø±Ø­Ù„Ø© Ø¨ØªØ§Ø®Ø¯ NodeWithScore ÙˆØªØ±Ø¬Ø¹ NodeWithScore.</p>
            </div>
        </div>

        <div class="card">
            <h2>âš¡ Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¯Ù‡</h2>
            <div class="step-by-step">
                <h3>ğŸ¯ Ø§Ù„Ø¨Ø³Ø§Ø·Ø©:</h3>
                <ul>
                    <li>Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø¨Ø³ÙŠØ·Ø© ÙˆÙ…ÙÙ‡ÙˆÙ…Ø©</li>
                    <li>parameter ÙˆØ§Ø­Ø¯ Ø¨Ø³ (similarity_cutoff)</li>
                    <li>Ù…Ù†Ø·Ù‚ ÙˆØ§Ø¶Ø­ ÙˆÙ…Ø¨Ø§Ø´Ø±</li>
                </ul>
                
                <h3>ğŸš€ Ø§Ù„ÙƒÙØ§Ø¡Ø©:</h3>
                <ul>
                    <li>O(n) time complexity - Ø¨ÙŠÙ…Ø± Ø¹Ù„Ù‰ ÙƒÙ„ node Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</li>
                    <li>Ù…Ø§ÙÙŠØ´ sorting Ø£Ùˆ operations Ù…Ø¹Ù‚Ø¯Ø©</li>
                    <li>memory efficient</li>
                </ul>
                
                <h3>ğŸ”§ Ø§Ù„Ù…Ø±ÙˆÙ†Ø©:</h3>
                <ul>
                    <li>cutoff Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ®ØµÙŠØµ</li>
                    <li>ÙŠØ´ØªØºÙ„ Ù…Ø¹ Ø£ÙŠ Ù†ÙˆØ¹ nodes</li>
                    <li>Ø³Ù‡Ù„ Ø§Ù„Ø¯Ù…Ø¬ Ù…Ø¹ postprocessors ØªØ§Ù†ÙŠØ©</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ® Ù…Ø«Ø§Ù„ ØªØ·Ø¨ÙŠÙ‚ÙŠ</h2>
            <div class="decision-tree">
                <h3>ğŸ“ Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ 5 nodes Ø¨Ø§Ù„Ù€ scores Ø¯ÙŠ:</h3>
                <ul>
                    <li>Node A: score = 0.85 âœ…</li>
                    <li>Node B: score = 0.45 âŒ</li>
                    <li>Node C: score = None âŒ</li>
                    <li>Node D: score = 0.72 âœ…</li>
                    <li>Node E: score = 0.68 âŒ</li>
                </ul>
                
                <p><strong>Ù…Ø¹ cutoff = 0.7:</strong> Ù‡ÙŠÙØ¶Ù„ Ø¨Ø³ Node A Ùˆ Node D</p>
            </div>
        </div>

        <div class="footer">
            <p>âš™ï¸ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³ | Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ§Ù„ÙŠ: Keyword Node Postprocessor - Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©</p>
        </div>
    </div>
</body>
</html>