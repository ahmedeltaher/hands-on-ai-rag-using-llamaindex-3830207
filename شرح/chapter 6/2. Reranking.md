# ๐ง ููุฎุต ุชุฑุชูุจ ุงูุนูููุงุช ูู LlamaIndex (ุจุงูุนุฑุจู ุงููุตุฑู)

ูู **LlamaIndex**ุ ุนูููุฉ ูุนุงูุฌุฉ ุงูุณุคุงู (query pipeline) ุจุชูุดู ูู ุฎุทูุงุช ูุนููุฉ ูุฏู ุจุงูุชุฑุชูุจ ๐  

---

## ๐ฝ๏ธ **Data Ingestion โ ุฅุฏุฎุงู ุงูุจูุงูุงุช**
ูู ุงูุฎุทูุฉ ุฏู ุจุชุฏุฎู ุงูุจูุงูุงุช ุงููู ุนูุฏู ูู ูุตุงุฏุฑ ูุฎุชููุฉ ุฒู: APIsุ PDFsุ SQLุ ุฃู ุญุชู ูููุงุช ูุตูุฉ.  
ุงููุธุงู ุจูุงุฎุฏูุง ููุจุฏุฃ ูุญุถูุฑูุง ุนุดุงู ุชุจูู ุฌุงูุฒุฉ ููู LLM.

---

## ๐๏ธ **Data Indexing โ ููุฑุณุฉ ุงูุจูุงูุงุช**
ุจุนุฏ ูุง ุงูุจูุงูุงุช ุชุฏุฎูุ ุจูุชุญููู ุดูููุง ูุชูุซูู ููุธู ูุณูู ุนูู ุงูููุฏูู ููููู ุจุณุฑุนุฉ ููุณุชุฎุฏูู ุจููุงุกุฉ.

---

## ๐ **Retrieval โ ุงูุงุณุชุฑุฌุงุน**
ุงููุฑุญูุฉ ุฏู ูู ุฃูู ุฎุทูุฉ ูู ุงูู RAG (Retrieval-Augmented Generation).  
ุงูููุฏูู ุจูุจุฏุฃ ูุฏูุฑ ุนูู ุงููุนูููุงุช ุงููู ูููุง ุนูุงูุฉ ุจุงูุณุคุงู ุจุชุงุนู.

---

## ๐๏ธ **Reranking โ ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ**
ุจุนุฏ ูุง ุงูููุฏูู ูุฌูุจ ุดููุฉ ูุณุชูุฏุงุช ุฃู ุฃุฌุฒุงุก ูุนูููุงุชุ ุจูุจุฏุฃ ูุนูุฏ ุชุฑุชูุจูุง ุญุณุจ ุฃูููุชูุง.  
ูุนูู ูุญุท ุงูุฃูุชุฑ ุตูุฉ ุจุงูุณุคุงู ูููุ ูุงูุฃูู ุชุญุช.  
ูุฏู ุจูุฎูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุฃุฏู.

---

## ไทพ **Post-processing โ ุงููุนุงูุฌุฉ ุจุนุฏ ุงูุงุณุชุฑุฌุงุน**
ุจุนุฏ ุงูุงุณุชุฑุฌุงุน ูุงูุชุฑุชูุจุ ุจูุชุทุจู ุดููุฉ ููุงุชุฑ ุฃู ุชุญูููุงุช ุนูู ุงููุนูููุงุช.  
ุฒู ูุซูุงู ุฅูู ูุดูู ุงููุชุงุฆุฌ ุงููู ุงูู similarity ุจุชุงุนูุง ููููุ  
ุฃู ูุณุชุฎุฏู ุนุงูู ุงูุฒูู (time decay) ุนุดุงู ูููู ุฃูููุฉ ุงููุนูููุงุช ุงููุฏููุฉ.  
ุงููุฏู ููุง ุฅูู ุชูุตู ูุฃุฏู ูุฌููุนุฉ ุจูุงูุงุช ูุจู ูุง ุชูููุฏ ุงูุฅุฌุงุจุฉ.

---

## ๐ฌ **Response Generation โ ุชูููุฏ ุงูุฑุฏ**
ูุฃุฎูุฑูุงุ ุงูููุฏูู ุจููููุฏ ุงูุฅุฌุงุจุฉ ุงูููุงุฆูุฉ ุงุนุชูุงุฏูุง ุนูู ุงูู context ุงููู ุฌู ูู ุงููุณุชูุฏุงุช ุงููู ุชู ุงุณุชุฑุฌุงุนูุง ูุชุฑุชูุจูุง.

---

ุฅุญูุง ููุง ุงุชููููุง ุนู ุงูู post-processingุ ุฏูููุชู ุจูู ููุชููู ุนู **reranking** โจ  

# ๐ฏ Reranking

ูู LlamaIndexุ ุงูู reranking ูุงูู post-processing ููุง ุฎุทูุชูู ูุฎุชููุชูู ูู ุงูู query pipeline.

ุงูู **Reranking** ุจูุดุชุบู ุนูู ุชุฑุชูุจ ุงูุนูุงุตุฑ (ุงูู nodes ุฃู ุงููุณุชูุฏุงุช) ุงููู ุงุชุฌุงุจูุง ูู ุนูููุฉ ุงูู retrievalุ  
ูุจูุนูุฏ ุชุฑุชูุจูู ุญุณุจ ูุนูุงุฑ ูุนูู โ ูููู ูููู **ูุฏู ุงูุตูุฉ ุจุงูุณุคุงูุ ุงูุชูููุชุ ุฃู ุฃู ูุนูุงุฑ ูุฎุตุต**.

ุงููุฏู ุฅู ุฃูุชุฑ ุงููุนูููุงุช ุงููููุฏุฉ ุชุทูุน ููู ูู ุงูุชุฑุชูุจ.

ุฃูุง ุงูู **Post-processing** ูุจููุฌู ุจุนุฏ ุงูู rerankingุ  
ูุจูุชุนุงูู ูุน ุงูุจูุงูุงุช ููุณูุง โ ุจูุญุฐูุ ูุนุฏููุ ุฃู ูููุชุฑ ุงูุนูุงุตุฑ ุญุณุจ ุดุฑูุท ูุนููุฉ.

ูุนูู ุจุจุณุงุทุฉ:
> ๐น ุงูู Reranking ุจูุฑุชูุจ.  
> ๐น ูุงูู Post-processing ุจููุธูู ููุตููู.

ุงูุงุชููู ุจูุดุชุบููุง ุนูู ููุณ ุงูุจูุงูุงุช ุงููู ุชู ุงุณุชุฑุฌุงุนูุงุ  
ููู ูู ูุฑุงุญู ูุฎุชููุฉ ููููู ุฃุบุฑุงุถ ูุฎุชููุฉ.

---

## โ๏ธ ุงูุชูููู ุงูุฃุดูุฑ: Cohere Rerank

ุฃุดูุฑ ุทุฑููุฉ ูุฅุนุงุฏุฉ ุงูุชุฑุชูุจ ูู LlamaIndex ูู ุจุงุณุชุฎุฏุงู **Cohereโs Rerank Model**ุ  
ูุฏู ุงููู ููุดุฑุญู ุฏูููุชู ๐  

---

## ๐ฆ ุงุณุชุฎุฏุงู ุงูู Reranker ุฒู ุงูู Post-Processor

ููุณ ุงูุจุงุชุฑู ุชูุฑูุจูุง:

```python
from llama_index.core import VectorStoreIndex, SimpleDirectoryReader
from llama_index.core.postprocessor import YourPostProcessOfChoice

# ุงูุฎุทูุงุช ุงูุณุงุจูุฉ ููุง (ุงูููุฑุณุฉุ ุฅูุฎ)

your_post_processor = YourPostProcessOfChoice(WhateverArgumentsYouNeedToPass)

query_engine = index.as_query_engine(
    ..., # ุจุงูู ุงูุฅุนุฏุงุฏุงุช
    node_postprocessors = your_post_processor
)

# ุงุณุชุนูุงู ูุงุญุฏ
response = query_engine.query("your query")

# ุฃู ุชูุฏุฑ ุชุทุจูู ุงูููุงู ุฏู ุนูู ูู ุงูุฏุงุชุง ุจุชุงุนุชู
```

๐งฉ ุฎูุฏ ุจุงูู ุฅู **ุงูุชุฑุชูุจ ููู** ููุง ุชุญุท reranker ู postprocessor ูู ููุณ ุงูู query engine.  
ุงููู ุชุญุทู ุงูุฃูู ูู ุงููู ุจูุชูููุฐ ุงูุฃูู.

---

# ๐ Cohere Rerank

ุฑุงุจุท ุงูููุฏ: [Cohere Rerank GitHub](https://github.com/run-llama/llama_index/blob/main/llama-index-integrations/postprocessor/llama-index-postprocessor-cohere-rerank/llama_index/postprocessor/cohere_rerank/base.py)

ุงูู `CohereRerank` ุจูุนูุฏ ุชุฑุชูุจ ูุงุฆูุฉ ุงูู nodes ุญุณุจ ูุฏู ุตูุชูุง ุจุงูุณุคุงู ุจุงุณุชุฎุฏุงู **Cohere API**.  
ุงููุฏู ุฅูู ูุญุณูู ุฌูุฏุฉ ุงููุชุงุฆุฌ ุงููู ุงูููุฏูู ููุณุชุฎุฏููุง ูู ุงูุชูููุฏ.

ูุจู ูุง ุชุณุชุฎุฏููุ ูุงุฒู ุชุฑููุจู ูุฏู ๐  
```bash
pip install llama-index-postprocessor-cohere-rerank
```

---

## โ๏ธ ุงูุจุฑุงููุชุฑุงุช ุงููู ูุญุชุงุฌ ุชุนุฑููุง

- `top_n`: ุนุฏุฏ ุงูุนูุงุตุฑ ุงููู ูุชุฑุฌุน ุจุนุฏ ุงูุชุฑุชูุจ (ุงูุงูุชุฑุงุถู 2).  
- `model`: ุงุณู ููุฏูู Cohere ุงููุณุชุฎุฏู. ุงูุงูุชุฑุงุถู `"rerank-english-v2.0"`,  
  ุจุณ ุงูุฃูุถู ุชุณุชุฎุฏู `"rerank-english-v3.0"`.  
- `api_key`: ููุชุงุญ Cohere API. ูู ูุง ุญุฏุฏุชูุดุ ุจูุญุงูู ูุงุฎุฏู ูู ูุชุบูุฑ ุงูุจูุฆุฉ `COHERE_API_KEY`.

---

## ๐ ุฅุฒุงู ุจูุดุชุบู ูู ุฌูุง (Under the hood)

ุงูู reranker ุจูุชุถุงู ูู postprocessor ูู ุงูู query engine.  
ููุง ูุญุตู ุงุณุชุนูุงูุ ุจูุนูุฏ ุชุฑุชูุจ ุงูู nodes ุจุงุณุชุฎุฏุงู Cohere API ุญุณุจ ูุฏู ุงูุตูุฉ ุจุงูุณุคุงูุ  
ูุจุนุฏูู ุจูุฑุฌุน **ุฃูุถู 3 ูุชุงุฆุฌ**.

### ุงูุฎุทูุงุช:

1. ุงูู postprocessor ุจูุงุฎุฏ ูุงุฆูุฉ ุงูู nodes ูุงูุณุคุงู.  
2. ุจูุณุชุฎุฑุฌ ุงููุต ูู ูู node.  
3. ุจูุณุชุฎุฏู Cohere API ูู ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ ุญุณุจ ุงูุตูุฉ.  
4. Cohere ุจูุฑุฌุน ููุณุช ูููุง ุงูุชุฑุชูุจ ุงูุฌุฏูุฏ ูุณููุฑ ุงูุตูุฉ ููู ุนูุตุฑ.  
5. ุงููุธุงู ุจูุนูู ููุณุช ุฌุฏูุฏุฉ ูู `NodeWithScore`ุ ูุญุชูุธ ุจุงููุญุชูู ููุญุฏุซ ุงูุณููุฑ.  
6. ุจูุฑุฌุน ููุณุช ุงูู nodes ุจุนุฏ ุงูุชุฑุชูุจ.

---

## ๐ง ุงูุฎูุงุตุฉ

- **Reranking** = ุชุฑุชูุจ ุงูุนูุงุตุฑ ุญุณุจ ุงูุฃูููุฉ.  
- **Post-processing** = ุชูุถูู ูุชุญุณูู ุงูุนูุงุตุฑ ุจุนุฏ ุงูุชุฑุชูุจ.  
- ูุงูุงุชููู ุณูุง ุจูุฎูููุง ุงูุฑุฏ ุงูููุงุฆู ุฃุฏู ูุฃููู.  

ูุจุงุณุชุฎุฏุงู **Cohere Rerank**ุ  
ุจุชุถูู ุฅู ุงูููุฏูู ูุดูู ุฃูู ุงููุนูููุงุช ุงูุฃูู โ ูุฏู ุจููุฑู ุฌุงูุฏ ูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ๐ช  

---

## ๐ ุจุฏุงุฆู ุชุงููุฉ ูุดููุฑุฉ ุบูุฑ Cohere Rerank

ููู ููุงู ุงุชููู ูู ุฃุดูุฑ ุงูู rerankers ุงููู ูููู ุชุณุชุฎุฏููู ุจุฏู Cohere ๐  

- [**Colbert Rerank**](https://docs.llamaindex.ai/en/stable/examples/node_postprocessor/ColbertRerank/)  
  ูููู ุชุซุจุชู ุจุงูุฃูุฑ ุฏู:  
  ```bash
  pip install llama-index-postprocessor-colbert-rerank
  ```  
  ูุชุณุชูุฑุฏู ูุฏู:  
  ```python
  from llama_index.postprocessor.colbert_rerank import ColbertRerank
  ```

- [**Flag Embedding Reranker**](https://docs.llamaindex.ai/en/stable/examples/node_postprocessor/FlagEmbeddingReranker/)  
  ูููู ุชุซุจุชู ุจุงูุฃูุฑ ุฏู:  
  ```bash
  pip install llama-index-postprocessor-flag-embedding-reranker
  ```  
  ูุชุณุชูุฑุฏู ูุฏู:  
  ```python
  from llama_index.postprocessor.flag_embedding_reranker import FlagEmbeddingReranker
  ```

ุงูุงุชููู ูููู ููุณ ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู ุฒู ุงููู ูููุ  
ูุชูุฏุฑ ุชุดูู ููุฏ ุงููุตุฏุฑ ุนุดุงู ุชุนุฑู ุงูุชูุงุตูู ุงูุฎุงุตุฉ ุจูู ูุงุญุฏ.
