# ุงููุณุชูุฑุฌุนุงุช ุงููุฌููุฉ (Hybrid Retrievers)

<div dir="rtl">

## ููุงุญุธุฉ ุนู ุงูุชูุตูุจ

ูุงุฒู ุชุดุบู ุงูุฃูุฑ ุงูุชุงูู:

`pip install llama-index-retrievers-bm25`

## ูููุฉ ูุฎุชุตุฑุฉ ุนู ุฃูุถุงุน ุงุณุชุนูุงู ูุฎุฒู ุงููุชุฌูุงุช

ุงูู `vector_store_query_mode` ูู LlamaIndex ุจูุญุฏุฏ ููุน ุงูุจุญุซ ุงููู ููุชููุฐ. ููุง ูุตู ูุฎุชุตุฑ ููู ูุถุน:

### ุงูุฃูุถุงุน ุงููุชุงุญุฉ:

#### `default` (ุงูุงูุชุฑุงุถู)

ุงููุถุน ุฏู ุจูุคุฏู ุจุญุซ ูุชุฌู. ุจูุณุชุฑุฌุน ุฃูุซุฑ ุงููุชุฌูุงุช ุงููุดุงุจูุฉ ุจูุงุกู ุนูู ูุชุฌู ุงูุงุณุชุนูุงู. ุจููุดุฆูุง ุชูุซูู ุฑููู ููุทุนุฉ ูุตุ ููุซูุฉ ููุงุฆูุฉ ุทูููุฉ ูู ุงูุฃุฑูุงู. ุงููุชุฌูุงุช ุงููุซููุฉ ุฏู ุชูุฏุฑ ุชูุชูุท ุฏูุงูุงุช ุบููุฉ ุนุจุฑ ูุทุนุฉ ุงููุต ุจุงููุงูู. `alpha=0.75` ุจููุณุชุฎุฏู ุงูุชุฑุงุถูุงู.

#### `hybrid` (ุงููุฌูู)

ุงููุถุน ุฏู ุจูุคุฏู ุจุญุซ ูุฌูู. ุจูุฏูุฌ ุงูุจุญุซ ุงููุชุฌู ูุน ุทุฑู ุงูุจุญุซ ุงูุชูููุฏูุฉ. ูุนุงูู `alpha` ุจูุญุฏุฏ ุงูุชุฑุฌูุญ (`alpha = 0` โ bm25ุ `alpha = 1` โ ุงูุจุญุซ ุงููุชุฌู).

#### `semantic_hybrid` (ุงููุฌูู ุงูุฏูุงูู)

ุงูุจุญุซ ุงููุฌูู ุงูุฏูุงูู ุจูุฏูุฌ ุงูุจุญุซ ุงููุตู ูุน ุชุถูููุงุช ุงููุชุฌูุงุช. ุงูุจุญุซ ุงููุตู ุจูููุฑ ูุทุงุจูุฉ ุงููููุงุช ุงูููุชุงุญูุฉ ูุงูุงุณุชุฑุฌุงุน ุงููุนุฌูู. ุชุถูููุงุช ุงููุชุฌูุงุช ุจุชุณูุญ ุจุฅูุฌุงุฏ ูุณุชูุฏุงุช ุจูุนูู ูุดุงุจูุ ุญุชู ูู ูุงูุงูุชุด ุชุญุชูู ุนูู ูุทุงุจูุงุช ูููุงุช ููุชุงุญูุฉ ุฏูููุฉ. ุงููุถุน ุฏู ุจูุฏูุฌ ุฅุนุงุฏุฉ ุชุฑุชูุจ ุฏูุงููุฉ ููุชุงุฆุฌ ุงูุจุญุซ ุงููุฌูู ูุชุญุณูู ุตูุฉ ุงูุจุญุซ.

#### `sparse` (ุงููุชูุงุซุฑ)

ูุนุธู ุงูุนูุงุตุฑ ูู ุงููุชุฌู ุงููุชูุงุซุฑ ุตูุฑุ ูุน ุนุฏุฏ ูููู ููุท ูู ุงูููู ุงูุฑุฆูุณูุฉ ุบูุฑ ุตูุฑ. ุงููุชุฌูุงุช ุงููุชูุงุซุฑุฉ ุฏู ุฑุงุฆุนุฉ ูู ุงูุชูุงุท ูููุงุช ููุชุงุญูุฉ ูุญุฏุฏุฉ ูุชูุงุตูู ุตุบูุฑุฉ ูุดุงุจูุฉ. ูุญุชุงุฌ ุชุณุชุฎุฏู ูููุฐุฌ ุชุถููู ูุชุฎุตุต ูุฅูุดุงุก ูุชุฌูุงุช ูุชูุงุซุฑุฉ.

- `FastEmbed` ุนูุฏูุง ุจุนุถ ุงูุฎูุงุฑุงุช ูููุงุฐุฌ ุชุถููู ูุต ูุชูุงุซุฑุ ูุซูุงู ุชูุฏุฑ ุชูุฑุฑ `prithvida/Splade_PP_en_v1` ูุงุณู ุงููููุฐุฌ ููุง ุชุดุบู `setup_embed_model` ูู ุนุงูุฒ ุชุณุชุฎุฏููู.
- ูุงุณุชุฎุฏููุงุด ูุชุฌู ูุชูุงุซุฑ ููุงุ ููุด ููุดูู ุฏู ูู ุงูุนูู.
- ููุงุญุธุฉ: ูู ุฌุฑุจุช ุฏู ูุชุญุชุงุฌ ุชุนูู ูุนุงูู `sparse_top_k`ุ ูุงููู ุจููุซู ูุงู ุนูุฏุฉ ูุชูุณุชุฑุฌุน ูู ูู ุงุณุชุนูุงู ูุซูู ููุชูุงุซุฑ.

#### `text_search` (ุงูุจุญุซ ุงููุตู)

ุงูุจุญุซ ุงููุตู ุจูุฏูุฑ ุนูู ูุทุงุจูุงุช ูููุงุช ููุชุงุญูุฉ ุฏูููุฉ ุจูู ุงูุงุณุชุนูุงู ูุงููุณุชูุฏุงุช.

### ูุนุงููุงุช ุฅุถุงููุฉ:

- `similarity_top_k`: ุจูุชุญูู ูู ุงูุนุฏุฏ ุงูููุงุฆู ูู ุงูุนูุฏ ุงููุฑุฌูุนุฉ. ุฎูุงุฑุฒููุฉ ุงูุฏูุฌ ุจุชูุทุจู ูุชุฑุชูุจ ูุชูุธูู ุงูุนูุฏ ูู ูุถุงุกุงุช ูุชุฌูุงุช ูุฎุชููุฉุ `similarity_top_k=2` ูุนูู ุฃุนูู ุนูุฏุชูู ุจุนุฏ ุงูุฏูุฌ ุจูุชุฑุฌุนูุง.

- `hybrid_top_k`: ุฅุฑุฌุงุน ุฃุนูู k ูุชูุฌุฉ ูู ุงูุจุญุซ `hybrid`. `similarity_top_k` ุจููุณุชุฎุฏู ููุจุญุซ ุงููุซูู top k.

## ูุณุชูุฑุฌุน ุงูุฏูุฌ ุงููุฌูู (Hybrid Fusion Retriever)

ูุณุชูุฑุฌุน ุงูุฏูุฌ ุงููุฌูู ุจูุฏูุฌ ุงูููุงูุฌ ุงูุฏูุงููุฉ ูุงููุจููุฉ ุนูู ุงููููุงุช ุงูููุชุงุญูุฉ. ุฏู ุจูุณุชุฎุฏู [ูุณุชูุฑุฌุน ูุจูู ุนูู BM25](https://en.wikipedia.org/wiki/Okapi_BM25) ูุน ููุฑุณ ุฏูุงูู. [BM25](https://github.com/run-llama/llama_index/blob/main/llama-index-integrations/retrievers/llama-index-retrievers-bm25/llama_index/retrievers/bm25/base.py) ูู ุฏุงูุฉ ุชุฑุชูุจ ุจุชุณุชุฎุฏููุง ูุญุฑูุงุช ุงูุจุญุซ ูุชูุฏูุฑ ุตูุฉ ุงููุณุชูุฏุงุช ุจุงุณุชุนูุงู ุจุญุซ ูุนูู.

### ุฅุฒุงู ุจูุดุชุบู

ุงููุธุงู ุจูุชุจุน ุนูููุฉ ูู ุซูุงุซ ุฎุทูุงุช:

#### 1. ุชูููุฏ/ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุงุณุชุนูุงู

ุจููุดุฆ ุงุณุชุนูุงูุงุช ูุชุนุฏุฏุฉ ูู ุงุณุชุนูุงู ุงููุณุชุฎุฏู ุงูุฃุตูู ููุทุงุจูุฉ ููุฉ ุงููุณุชุฎุฏู ุจุดูู ุฃูุถู ูุชุญุณูู ุฏูุฉ ูุดููููุฉ ุงููุชุงุฆุฌ ุงููุณุชูุฑุฌุนุฉ.

#### 2. ุงูุงุณุชุฑุฌุงุน

ุจูุคุฏู ุงูุงุณุชุฑุฌุงุน ููู ุงุณุชุนูุงู ุนุจุฑ ูุฌููุนุฉ ูู ุงููุณุชูุฑุฌุนุงุช.

#### 3. ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ/ุงูุฏูุฌ

ุจูุฏูุฌ ุงููุชุงุฆุฌ ูู ูู ุงูุงุณุชุนูุงูุงุช ููุทุจู ุฎุทูุฉ ุฅุนุงุฏุฉ ุชุฑุชูุจ ูุฏูุฌ ุฃุนูู ุงููุชุงุฆุฌ ุฐุงุช ุงูุตูุฉ.

## ูุนูููุงุช ูููุฏุฉ ููููุงุฑุณูู RAG

### ูุถุน ุฏูุฌ ุงูููุฑุณ

ุจูุนูู ุงููุถุน ูู `reciprocal_rerank`. ุงููุธุงู ุจูุฏูุฌ ููุฑุณู ูุน ูุณุชูุฑุฌุน ูุจูู ุนูู BM25. ุฏู ุจูุณูุญ ูู ูููู ุงูุนูุงูุงุช ุงูุฏูุงููุฉ (ุงูุฑูุงุจุท ุฐุงุช ุงููุนูู ุจูู ุงููููุงุช) ูุงููููุงุช ุงูููุชุงุญูุฉ ูู ุงุณุชุนูุงูุงุช ุงููุฏุฎู. ุงูุฃูุถุงุน ุงูุชุงููุฉ ูู `relative_score`ุ `dist_based_score`ุ `simple`.

#### ุฃูุถุงุน ุงูุฏูุฌ ุงููุฎุชููุฉ:

**`reciprocal_rerank`**: ุงูุชุฑุชูุจ ุงููุชุจุงุฏู ูููุงุณ ููุฏู ุณุฑุนุฉ ุธููุฑ ุนูุตุฑ ุฐู ุตูุฉ ูู ูุงุฆูุฉ ูุฑุชุจุฉ. ุงูุชุฑุชูุจุงุช ุงูุฃูู ุจุชูุงูู ุตูุฉ ุฃุนูู. ุงููุถุน ุฏู ุจูุฏูุฌ ุงููุชุงุฆุฌ ูู ูุตุงุฏุฑ ูุชุนุฏุฏุฉ ุจุฅุนุทุงุก ุฃูููุฉ ุฃูุจุฑ ููุนูุฏ ุงููู ุจุชุธูุฑ ูุจูุฑุงู ูู ุงูุชุฑุชูุจุงุช ุนุจุฑ ุงููุตุงุฏุฑ ุฏู.

**`relative_score`**: ุจูููุณ ูู ูุชูุฌุฉ ููุทุงู ูู 0 ูู 1 ุจุงุณุชุฎุฏุงู ููุงุณ min-max. ุจุนุฏูู ุจูุถุฑุจ ูู ูุชูุฌุฉ ููุงุณุฉ ูู ูุฒู ุฎุงุต ุจุงููุณุชูุฑุฌุน. ุจุนุฏ ูุฏูุ ุจููุณู ูู ูุชูุฌุฉ ุนูู ุงูุนุฏุฏ ุงูุฅุฌูุงูู ููุงุณุชุนูุงูุงุช. ุจุดูู ุฃุณุงุณูุ ุจูููุณุ ููุฒูุ ููุฏูุฌ ุงููุชุงุฆุฌ ูู ูุตุงุฏุฑ ุงุณุชุฑุฌุงุน ูุชุนุฏุฏุฉ.

**`dist_based_score`**: ููุณ `relative_score`ุ ุจุณ ุจุฏู ุงุณุชุฎุฏุงู ุฃูู ูุฃุนูู ุงููุชุงุฆุฌ ูุจุงุดุฑุฉุ ุงูุฏุงูุฉ ุจุชุญุณุจูู ุจูุงุกู ุนูู ุงููุชูุณุท ูุงูุงูุญุฑุงู ุงููุนูุงุฑู ูููุชุงุฆุฌ. ุฏู ุจูููู ุชุฃุซูุฑ ุงูููู ุงูุดุงุฐุฉ ุนูู ุนูููุฉ ุงูููุงุณ.

**`simple`**: ุจูุนูุฏ ุชุฑุชูุจ ุงููุชุงุฆุฌ ุจูุงุกู ุนูู ุงููุชุงุฆุฌ ุงูุฃุตููุฉ.

## ุฎูุงุฑุฒููุฉ ุงูุชุฑุชูุจ ุงููุชุจุงุฏู

ุจูุง ุฅู ููุง ุงููุณุชูุฑุฌุนูู ุจูุญุณุจูุง ูุชูุฌุฉ ูุตูุฉ ุงููุชุงุฆุฌุ ุงููุธุงู ุจูุณุชุฎุฏู ุฎูุงุฑุฒููุฉ ุงูุชุฑุชูุจ ุงููุชุจุงุฏู ูุฅุนุงุฏุฉ ุฎูุท ุงููุชุงุฆุฌ. ุฏู ุจูุชุนูู ุจุฏูู ุงุณุชุฎุฏุงู ููุงุฐุฌ ุฅุถุงููุฉ ุฃู ุญุณุงุจุงุช ููุฑุทุฉุ ุจูุฎูู ุงูุนูููุฉ ุฃูุซุฑ ููุงุกุฉ.

### ุฎุทูุงุช ุงูุฎูุงุฑุฒููุฉ:

#### ๐งฎ ุญุณุงุจ ุงูุชุฑุชูุจ

ููู ุนูุฏุฉ ูุฑูุฏุฉุ ุงุญุณุจ ุชุฑุชูุจูุง ุงููุชุจุงุฏู ูู ูู ูุงุฆูุฉ ุงููู ุจุชุธูุฑ ูููุง. ุงูุชุฑุชูุจ ุงููุชุจุงุฏู ูุนูุฏุฉ ูู ูุงุฆูุฉ ูุนุฑูู ูู 1 ููุณูู ุนูู ูููุนูุง ูู ุงููุงุฆูุฉ ุฏู (ูุซูุงูุ ุนูุฏุฉ ูู ุชุฑุชูุจ 3 ุนูุฏูุง ุชุฑุชูุจ ูุชุจุงุฏู 1/3).

#### ๐ ุชุฌููุน ุงููุชุงุฆุฌ

ุงุฌูุน ุงูุชุฑุชูุจุงุช ุงููุชุจุงุฏูุฉ ููู ุนูุฏุฉ ุนุจุฑ ูู ุงูููุงุฆู ุงููู ุจุชุธูุฑ ูููุง. ุงููุชูุฌุฉ ุงููุฌูุนุฉ ุฏู ุจุชูุซู ุงูุตูุฉ ุงูุฅุฌูุงููุฉ ููุนูุฏุฉุ ุจุชุงุฎุฏ ูู ุงูุงุนุชุจุงุฑ ุฃุฏุงุฆูุง ุนุจุฑ ุณููุงุฑูููุงุช ุงุณุชุฑุฌุงุน ูุชุนุฏุฏุฉ.

#### ๐ฅ๐ฅ๐ฅ ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ

ุฃุฎูุฑุงูุ ุฃุนุฏ ุชุฑุชูุจ ูู ุงูุนูุฏ ุจูุงุกู ุนูู ูุชุงุฆุฌูู ุงููุฌูุนุฉุ ูู ุงูุฃุนูู ููุฃุฏูู. ุฎุทูุฉ ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ ุฏู ุจุชุนุทู ุฃููููุฉ ููุนูุฏ ุงููู ุจุชุธูุฑ ุจุงุณุชูุฑุงุฑ ูู ุชุฑุชูุจุงุช ุฃุนูู ุนุจุฑ ููุงุฆู ูุชุนุฏุฏุฉุ ูุจุงูุชุงูู ูู ุงููุฑุฌุญ ุฃู ุชููู ุฃูุซุฑ ุตูุฉ ุจุงูุงุณุชุนูุงู.

</div>
